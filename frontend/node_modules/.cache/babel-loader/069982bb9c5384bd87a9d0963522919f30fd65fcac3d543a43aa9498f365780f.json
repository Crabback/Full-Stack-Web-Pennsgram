{"ast":null,"code":"import _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport React, { Children, useState, useEffect } from 'react';\nimport invariant from 'invariant';\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport useStyles, { inline } from 'substyle';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\n\n// escape RegExp special characters https://stackoverflow.com/a/9310752/5142490\nvar escapeRegex = function escapeRegex(str) {\n  return str.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n};\nvar PLACEHOLDERS = {\n  id: '__id__',\n  display: '__display__'\n};\nvar findPositionOfCapturingGroup = function findPositionOfCapturingGroup(markup, parameterName) {\n  invariant(parameterName === 'id' || parameterName === 'display', \"Second arg must be either \\\"id\\\" or \\\"display\\\", got: \\\"\".concat(parameterName, \"\\\"\")); // find positions of placeholders in the markup\n\n  var indexDisplay = markup.indexOf(PLACEHOLDERS.display);\n  var indexId = markup.indexOf(PLACEHOLDERS.id); // set indices to null if not found\n\n  if (indexDisplay < 0) indexDisplay = null;\n  if (indexId < 0) indexId = null; // markup must contain one of the mandatory placeholders\n\n  invariant(indexDisplay !== null || indexId !== null, \"The markup '\".concat(markup, \"' does not contain either of the placeholders '__id__' or '__display__'\"));\n  if (indexDisplay !== null && indexId !== null) {\n    // both placeholders are used, return 0 or 1 depending on the position of the requested parameter\n    return parameterName === 'id' && indexId <= indexDisplay || parameterName === 'display' && indexDisplay <= indexId ? 0 : 1;\n  } // just one placeholder is being used, we'll use the captured string for both parameters\n\n  return 0;\n};\nvar combineRegExps = function combineRegExps(regExps) {\n  var serializedRegexParser = /^\\/(.+)\\/(\\w+)?$/;\n  return new RegExp(regExps.map(function (regex) {\n    var _serializedRegexParse = serializedRegexParser.exec(regex.toString()),\n      _serializedRegexParse2 = _slicedToArray(_serializedRegexParse, 3),\n      regexString = _serializedRegexParse2[1],\n      regexFlags = _serializedRegexParse2[2];\n    invariant(!regexFlags, \"RegExp flags are not supported. Change /\".concat(regexString, \"/\").concat(regexFlags, \" into /\").concat(regexString, \"/\"));\n    return \"(\".concat(regexString, \")\");\n  }).join('|'), 'g');\n};\nvar countPlaceholders = function countPlaceholders(markup) {\n  var count = 0;\n  if (markup.indexOf('__id__') >= 0) count++;\n  if (markup.indexOf('__display__') >= 0) count++;\n  return count;\n};\nvar emptyFn = function emptyFn() {}; // Finds all occurrences of the markup in the value and calls the `markupIteratee` callback for each of them.\n// The optional `textIteratee` callback is called for each plain text ranges in between these markup occurrences.\n\nvar iterateMentionsMarkup = function iterateMentionsMarkup(value, config, markupIteratee) {\n  var textIteratee = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : emptyFn;\n  var regex = combineRegExps(config.map(function (c) {\n    return c.regex;\n  }));\n  var accOffset = 2; // first is whole match, second is the for the capturing group of first regexp component\n\n  var captureGroupOffsets = config.map(function (_ref) {\n    var markup = _ref.markup;\n    var result = accOffset; // + 1 is for the capturing group we add around each regexp component in combineRegExps\n\n    accOffset += countPlaceholders(markup) + 1;\n    return result;\n  });\n  var match;\n  var start = 0;\n  var currentPlainTextIndex = 0; // detect all mention markup occurrences in the value and iterate the matches\n\n  while ((match = regex.exec(value)) !== null) {\n    var offset = captureGroupOffsets.find(function (o) {\n      return !!match[o];\n    }); // eslint-disable-line no-loop-func\n\n    var mentionChildIndex = captureGroupOffsets.indexOf(offset);\n    var _config$mentionChildI = config[mentionChildIndex],\n      markup = _config$mentionChildI.markup,\n      displayTransform = _config$mentionChildI.displayTransform;\n    var idPos = offset + findPositionOfCapturingGroup(markup, 'id');\n    var displayPos = offset + findPositionOfCapturingGroup(markup, 'display');\n    var id = match[idPos];\n    var display = displayTransform(id, match[displayPos]);\n    var substr = value.substring(start, match.index);\n    textIteratee(substr, start, currentPlainTextIndex);\n    currentPlainTextIndex += substr.length;\n    markupIteratee(match[0], match.index, currentPlainTextIndex, id, display, mentionChildIndex, start);\n    currentPlainTextIndex += display.length;\n    start = regex.lastIndex;\n  }\n  if (start < value.length) {\n    textIteratee(value.substring(start), start, currentPlainTextIndex);\n  }\n};\nvar getPlainText = function getPlainText(value, config) {\n  var result = '';\n  iterateMentionsMarkup(value, config, function (match, index, plainTextIndex, id, display) {\n    result += display;\n  }, function (plainText) {\n    result += plainText;\n  });\n  return result;\n};\n\n// in the marked up value string.\n// If the passed character index lies inside a mention, the value of `inMarkupCorrection` defines the\n// correction to apply:\n//   - 'START' to return the index of the mention markup's first char (default)\n//   - 'END' to return the index after its last char\n//   - 'NULL' to return null\n\nvar mapPlainTextIndex = function mapPlainTextIndex(value, config, indexInPlainText) {\n  var inMarkupCorrection = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'START';\n  if (typeof indexInPlainText !== 'number') {\n    return indexInPlainText;\n  }\n  var result;\n  var textIteratee = function textIteratee(substr, index, substrPlainTextIndex) {\n    if (result !== undefined) return;\n    if (substrPlainTextIndex + substr.length >= indexInPlainText) {\n      // found the corresponding position in the current plain text range\n      result = index + indexInPlainText - substrPlainTextIndex;\n    }\n  };\n  var markupIteratee = function markupIteratee(markup, index, mentionPlainTextIndex, id, display, childIndex, lastMentionEndIndex) {\n    if (result !== undefined) return;\n    if (mentionPlainTextIndex + display.length > indexInPlainText) {\n      // found the corresponding position inside current match,\n      // return the index of the first or after the last char of the matching markup\n      // depending on whether the `inMarkupCorrection`\n      if (inMarkupCorrection === 'NULL') {\n        result = null;\n      } else {\n        result = index + (inMarkupCorrection === 'END' ? markup.length : 0);\n      }\n    }\n  };\n  iterateMentionsMarkup(value, config, markupIteratee, textIteratee); // when a mention is at the end of the value and we want to get the caret position\n  // at the end of the string, result is undefined\n\n  return result === undefined ? value.length : result;\n};\nvar spliceString = function spliceString(str, start, end, insert) {\n  return str.substring(0, start) + insert + str.substring(end);\n};\n\n// guided by the textarea text selection ranges before and after the change\n\nvar applyChangeToValue = function applyChangeToValue(value, plainTextValue, _ref, config) {\n  var selectionStartBefore = _ref.selectionStartBefore,\n    selectionEndBefore = _ref.selectionEndBefore,\n    selectionEndAfter = _ref.selectionEndAfter;\n  var oldPlainTextValue = getPlainText(value, config);\n  var lengthDelta = oldPlainTextValue.length - plainTextValue.length;\n  if (selectionStartBefore === 'undefined') {\n    selectionStartBefore = selectionEndAfter + lengthDelta;\n  }\n  if (selectionEndBefore === 'undefined') {\n    selectionEndBefore = selectionStartBefore;\n  } // Fixes an issue with replacing combined characters for complex input. Eg like acented letters on OSX\n\n  if (selectionStartBefore === selectionEndBefore && selectionEndBefore === selectionEndAfter && oldPlainTextValue.length === plainTextValue.length) {\n    selectionStartBefore = selectionStartBefore - 1;\n  } // extract the insertion from the new plain text value\n\n  var insert = plainTextValue.slice(selectionStartBefore, selectionEndAfter); // handling for Backspace key with no range selection\n\n  var spliceStart = Math.min(selectionStartBefore, selectionEndAfter);\n  var spliceEnd = selectionEndBefore;\n  if (selectionStartBefore === selectionEndAfter) {\n    // handling for Delete key with no range selection\n    spliceEnd = Math.max(selectionEndBefore, selectionStartBefore + lengthDelta);\n  }\n  var mappedSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'START');\n  var mappedSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'END');\n  var controlSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'NULL');\n  var controlSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'NULL');\n  var willRemoveMention = controlSpliceStart === null || controlSpliceEnd === null;\n  var newValue = spliceString(value, mappedSpliceStart, mappedSpliceEnd, insert);\n  if (!willRemoveMention) {\n    // test for auto-completion changes\n    var controlPlainTextValue = getPlainText(newValue, config);\n    if (controlPlainTextValue !== plainTextValue) {\n      // some auto-correction is going on\n      // find start of diff\n      spliceStart = 0;\n      while (plainTextValue[spliceStart] === controlPlainTextValue[spliceStart]) {\n        spliceStart++;\n      } // extract auto-corrected insertion\n\n      insert = plainTextValue.slice(spliceStart, selectionEndAfter); // find index of the unchanged remainder\n\n      spliceEnd = oldPlainTextValue.lastIndexOf(plainTextValue.substring(selectionEndAfter)); // re-map the corrected indices\n\n      mappedSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'START');\n      mappedSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'END');\n      newValue = spliceString(value, mappedSpliceStart, mappedSpliceEnd, insert);\n    }\n  }\n  return newValue;\n};\n\n// returns a the index of of the first char of the mention in the plain text.\n// If indexInPlainText does not lie inside a mention, returns indexInPlainText.\n\nvar findStartOfMentionInPlainText = function findStartOfMentionInPlainText(value, config, indexInPlainText) {\n  var result = indexInPlainText;\n  var foundMention = false;\n  var markupIteratee = function markupIteratee(markup, index, mentionPlainTextIndex, id, display, childIndex, lastMentionEndIndex) {\n    if (mentionPlainTextIndex <= indexInPlainText && mentionPlainTextIndex + display.length > indexInPlainText) {\n      result = mentionPlainTextIndex;\n      foundMention = true;\n    }\n  };\n  iterateMentionsMarkup(value, config, markupIteratee);\n  if (foundMention) {\n    return result;\n  }\n};\nvar getMentions = function getMentions(value, config) {\n  var mentions = [];\n  iterateMentionsMarkup(value, config, function (match, index, plainTextIndex, id, display, childIndex, start) {\n    mentions.push({\n      id: id,\n      display: display,\n      childIndex: childIndex,\n      index: index,\n      plainTextIndex: plainTextIndex\n    });\n  });\n  return mentions;\n};\nvar getSuggestionHtmlId = function getSuggestionHtmlId(prefix, id) {\n  return \"\".concat(prefix, \"-\").concat(id);\n};\nvar countSuggestions = function countSuggestions(suggestions) {\n  return Object.values(suggestions).reduce(function (acc, _ref) {\n    var results = _ref.results;\n    return acc + results.length;\n  }, 0);\n};\nvar getEndOfLastMention = function getEndOfLastMention(value, config) {\n  var mentions = getMentions(value, config);\n  var lastMention = mentions[mentions.length - 1];\n  return lastMention ? lastMention.plainTextIndex + lastMention.display.length : 0;\n};\nvar markupToRegex = function markupToRegex(markup) {\n  var escapedMarkup = escapeRegex(markup);\n  var charAfterDisplay = markup[markup.indexOf(PLACEHOLDERS.display) + PLACEHOLDERS.display.length];\n  var charAfterId = markup[markup.indexOf(PLACEHOLDERS.id) + PLACEHOLDERS.id.length];\n  return new RegExp(escapedMarkup.replace(PLACEHOLDERS.display, \"([^\".concat(escapeRegex(charAfterDisplay || ''), \"]+?)\")).replace(PLACEHOLDERS.id, \"([^\".concat(escapeRegex(charAfterId || ''), \"]+?)\")));\n};\nvar readConfigFromChildren = function readConfigFromChildren(children) {\n  return Children.toArray(children).map(function (_ref) {\n    var _ref$props = _ref.props,\n      markup = _ref$props.markup,\n      regex = _ref$props.regex,\n      displayTransform = _ref$props.displayTransform;\n    return {\n      markup: markup,\n      regex: regex ? coerceCapturingGroups(regex, markup) : markupToRegex(markup),\n      displayTransform: displayTransform || function (id, display) {\n        return display || id;\n      }\n    };\n  });\n}; // make sure that the custom regex defines the correct number of capturing groups\n\nvar coerceCapturingGroups = function coerceCapturingGroups(regex, markup) {\n  var numberOfGroups = new RegExp(regex.toString() + '|').exec('').length - 1;\n  var numberOfPlaceholders = countPlaceholders(markup);\n  invariant(numberOfGroups === numberOfPlaceholders, \"Number of capturing groups in RegExp \".concat(regex.toString(), \" (\").concat(numberOfGroups, \") does not match the number of placeholders in the markup '\").concat(markup, \"' (\").concat(numberOfPlaceholders, \")\"));\n  return regex;\n};\nvar makeMentionsMarkup = function makeMentionsMarkup(markup, id, display) {\n  return markup.replace(PLACEHOLDERS.id, id).replace(PLACEHOLDERS.display, display);\n};\n\n// This contains all the latin letters and the regex that match these letters with diacritics\n// https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript\nvar lettersDiacritics = [{\n  base: 'A',\n  letters: /(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F])/g\n}, {\n  base: 'AA',\n  letters: /(&#42802;|[\\uA732])/g\n}, {\n  base: 'AE',\n  letters: /(&#198;|&#508;|&#482;|[\\u00C6\\u01FC\\u01E2])/g\n}, {\n  base: 'AO',\n  letters: /(&#42804;|[\\uA734])/g\n}, {\n  base: 'AU',\n  letters: /(&#42806;|[\\uA736])/g\n}, {\n  base: 'AV',\n  letters: /(&#42808;|&#42810;|[\\uA738\\uA73A])/g\n}, {\n  base: 'AY',\n  letters: /(&#42812;|[\\uA73C])/g\n}, {\n  base: 'B',\n  letters: /(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181])/g\n}, {\n  base: 'C',\n  letters: /(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E])/g\n}, {\n  base: 'D',\n  letters: /(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779\\u00D0])/g\n}, {\n  base: 'DZ',\n  letters: /(&#497;|&#452;|[\\u01F1\\u01C4])/g\n}, {\n  base: 'Dz',\n  letters: /(&#498;|&#453;|[\\u01F2\\u01C5])/g\n}, {\n  base: 'E',\n  letters: /(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E])/g\n}, {\n  base: 'F',\n  letters: /(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B])/g\n}, {\n  base: 'G',\n  letters: /(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E])/g\n}, {\n  base: 'H',\n  letters: /(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D])/g\n}, {\n  base: 'I',\n  letters: /(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197])/g\n}, {\n  base: 'J',\n  letters: /(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\\u004A\\u24BF\\uFF2A\\u0134\\u0248])/g\n}, {\n  base: 'K',\n  letters: /(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2])/g\n}, {\n  base: 'L',\n  letters: /(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780])/g\n}, {\n  base: 'LJ',\n  letters: /(&#455;|[\\u01C7])/g\n}, {\n  base: 'Lj',\n  letters: /(&#456;|[\\u01C8])/g\n}, {\n  base: 'M',\n  letters: /(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C])/g\n}, {\n  base: 'N',\n  letters: /(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4\\u014A])/g\n}, {\n  base: 'NJ',\n  letters: /(&#458;|[\\u01CA])/g\n}, {\n  base: 'Nj',\n  letters: /(&#459;|[\\u01CB])/g\n}, {\n  base: 'O',\n  letters: /(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C])/g\n}, {\n  base: 'OE',\n  letters: /(&#338;|[\\u0152])/g\n}, {\n  base: 'OI',\n  letters: /(&#418;|[\\u01A2])/g\n}, {\n  base: 'OO',\n  letters: /(&#42830;|[\\uA74E])/g\n}, {\n  base: 'OU',\n  letters: /(&#546;|[\\u0222])/g\n}, {\n  base: 'P',\n  letters: /(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754])/g\n}, {\n  base: 'Q',\n  letters: /(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A])/g\n}, {\n  base: 'R',\n  letters: /(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782])/g\n}, {\n  base: 'S',\n  letters: /(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784])/g\n}, {\n  base: 'T',\n  letters: /(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786])/g\n}, {\n  base: 'TH',\n  letters: /(&#222;|[\\u00DE])/g\n}, {\n  base: 'TZ',\n  letters: /(&#42792;|[\\uA728])/g\n}, {\n  base: 'U',\n  letters: /(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244])/g\n}, {\n  base: 'V',\n  letters: /(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245])/g\n}, {\n  base: 'VY',\n  letters: /(&#42848;|[\\uA760])/g\n}, {\n  base: 'W',\n  letters: /(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72])/g\n}, {\n  base: 'X',\n  letters: /(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C])/g\n}, {\n  base: 'Y',\n  letters: /(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE])/g\n}, {\n  base: 'Z',\n  letters: /(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762])/g\n}, {\n  base: 'a',\n  letters: /(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250])/g\n}, {\n  base: 'aa',\n  letters: /(&#42803;|[\\uA733])/g\n}, {\n  base: 'ae',\n  letters: /(&#230;|&#509;|&#483;|[\\u00E6\\u01FD\\u01E3])/g\n}, {\n  base: 'ao',\n  letters: /(&#42805;|[\\uA735])/g\n}, {\n  base: 'au',\n  letters: /(&#42807;|[\\uA737])/g\n}, {\n  base: 'av',\n  letters: /(&#42809;|&#42811;|[\\uA739\\uA73B])/g\n}, {\n  base: 'ay',\n  letters: /(&#42813;|[\\uA73D])/g\n}, {\n  base: 'b',\n  letters: /(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253])/g\n}, {\n  base: 'c',\n  letters: /(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184])/g\n}, {\n  base: 'd',\n  letters: /(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A\\u00F0])/g\n}, {\n  base: 'dz',\n  letters: /(&#499;|&#454;|[\\u01F3\\u01C6])/g\n}, {\n  base: 'e',\n  letters: /(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD])/g\n}, {\n  base: 'f',\n  letters: /(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C])/g\n}, {\n  base: 'g',\n  letters: /(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F])/g\n}, {\n  base: 'h',\n  letters: /(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265])/g\n}, {\n  base: 'hv',\n  letters: /(&#405;|[\\u0195])/g\n}, {\n  base: 'i',\n  letters: /(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131])/g\n}, {\n  base: 'ij',\n  letters: /(&#307;|[\\u0133])/g\n}, {\n  base: 'j',\n  letters: /(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249])/g\n}, {\n  base: 'k',\n  letters: /(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3])/g\n}, {\n  base: 'l',\n  letters: /(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747])/g\n}, {\n  base: 'lj',\n  letters: /(&#457;|[\\u01C9])/g\n}, {\n  base: 'm',\n  letters: /(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F])/g\n}, {\n  base: 'n',\n  letters: /(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5\\u014B])/g\n}, {\n  base: 'nj',\n  letters: /(&#460;|[\\u01CC])/g\n}, {\n  base: 'o',\n  letters: /(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275])/g\n}, {\n  base: 'oe',\n  letters: /(&#339;|[\\u0153])/g\n}, {\n  base: 'oi',\n  letters: /(&#419;|[\\u01A3])/g\n}, {\n  base: 'ou',\n  letters: /(&#547;|[\\u0223])/g\n}, {\n  base: 'oo',\n  letters: /(&#42831;|[\\uA74F])/g\n}, {\n  base: 'p',\n  letters: /(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755])/g\n}, {\n  base: 'q',\n  letters: /(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759])/g\n}, {\n  base: 'r',\n  letters: /(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783])/g\n}, {\n  base: 's',\n  letters: /(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\\u0073\\u24E2\\uFF53\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B\\u017F])/g\n}, {\n  base: 'ss',\n  letters: /(&#223;|[\\u00DF])/g\n}, {\n  base: 't',\n  letters: /(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787])/g\n}, {\n  base: 'th',\n  letters: /(&#254;|[\\u00FE])/g\n}, {\n  base: 'tz',\n  letters: /(&#42793;|[\\uA729])/g\n}, {\n  base: 'u',\n  letters: /(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289])/g\n}, {\n  base: 'v',\n  letters: /(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C])/g\n}, {\n  base: 'vy',\n  letters: /(&#42849;|[\\uA761])/g\n}, {\n  base: 'w',\n  letters: /(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73])/g\n}, {\n  base: 'x',\n  letters: /(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D])/g\n}, {\n  base: 'y',\n  letters: /(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF])/g\n}, {\n  base: 'z',\n  letters: /(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763])/g\n}];\nvar removeAccents = function removeAccents(str) {\n  var formattedStr = str;\n  lettersDiacritics.forEach(function (letterDiacritics) {\n    formattedStr = formattedStr.replace(letterDiacritics.letters, letterDiacritics.base);\n  });\n  return formattedStr;\n};\nvar normalizeString = function normalizeString(str) {\n  return removeAccents(str).toLowerCase();\n};\nvar getSubstringIndex = function getSubstringIndex(str, substr, ignoreAccents) {\n  if (!ignoreAccents) {\n    return str.toLowerCase().indexOf(substr.toLowerCase());\n  }\n  return normalizeString(str).indexOf(normalizeString(substr));\n};\nvar isIE = function isIE() {\n  return !!document.documentMode;\n};\nvar isNumber = function isNumber(val) {\n  return typeof val === 'number';\n};\nvar keys = function keys(obj) {\n  return obj === Object(obj) ? Object.keys(obj) : [];\n};\nvar omit = function omit(obj) {\n  var _ref;\n  for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    rest[_key - 1] = arguments[_key];\n  }\n  var keys = (_ref = []).concat.apply(_ref, rest);\n  return Object.keys(obj).reduce(function (acc, k) {\n    if (obj.hasOwnProperty(k) && !keys.includes(k) && obj[k] !== undefined) {\n      acc[k] = obj[k];\n    }\n    return acc;\n  }, {});\n};\nvar _excluded = [\"style\", \"className\", \"classNames\"];\nfunction createDefaultStyle(defaultStyle, getModifiers) {\n  var enhance = function enhance(ComponentToWrap) {\n    var DefaultStyleEnhancer = function DefaultStyleEnhancer(_ref) {\n      var style = _ref.style,\n        className = _ref.className,\n        classNames = _ref.classNames,\n        rest = _objectWithoutProperties(_ref, _excluded);\n      var modifiers = getModifiers ? getModifiers(rest) : undefined;\n      var styles = useStyles(defaultStyle, {\n        style: style,\n        className: className,\n        classNames: classNames\n      }, modifiers);\n      return /*#__PURE__*/React.createElement(ComponentToWrap, _extends({}, rest, {\n        style: styles\n      }));\n    };\n    var displayName = ComponentToWrap.displayName || ComponentToWrap.name || 'Component';\n    DefaultStyleEnhancer.displayName = \"defaultStyle(\".concat(displayName, \")\");\n    return DefaultStyleEnhancer;\n  };\n  return enhance;\n}\nvar _generateComponentKey = function _generateComponentKey(usedKeys, id) {\n  if (!usedKeys.hasOwnProperty(id)) {\n    usedKeys[id] = 0;\n  } else {\n    usedKeys[id]++;\n  }\n  return id + '_' + usedKeys[id];\n};\nfunction Highlighter(_ref) {\n  var selectionStart = _ref.selectionStart,\n    selectionEnd = _ref.selectionEnd,\n    _ref$value = _ref.value,\n    value = _ref$value === void 0 ? '' : _ref$value,\n    onCaretPositionChange = _ref.onCaretPositionChange,\n    containerRef = _ref.containerRef,\n    children = _ref.children,\n    singleLine = _ref.singleLine,\n    style = _ref.style;\n  var _useState = useState({\n      left: undefined,\n      top: undefined\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    position = _useState2[0],\n    setPosition = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    caretElement = _useState4[0],\n    setCaretElement = _useState4[1];\n  useEffect(function () {\n    notifyCaretPosition();\n  }, [caretElement]);\n  var notifyCaretPosition = function notifyCaretPosition() {\n    if (!caretElement) {\n      return;\n    }\n    var offsetLeft = caretElement.offsetLeft,\n      offsetTop = caretElement.offsetTop;\n    if (position.left === offsetLeft && position.top === offsetTop) {\n      return;\n    }\n    var newPosition = {\n      left: offsetLeft,\n      top: offsetTop\n    };\n    setPosition(newPosition);\n    onCaretPositionChange(newPosition);\n  };\n  var config = readConfigFromChildren(children);\n  var caretPositionInMarkup;\n  if (selectionEnd === selectionStart) {\n    caretPositionInMarkup = mapPlainTextIndex(value, config, selectionStart, 'START');\n  }\n  var resultComponents = [];\n  var componentKeys = {};\n  var components = resultComponents;\n  var substringComponentKey = 0;\n  var textIteratee = function textIteratee(substr, index, indexInPlainText) {\n    // check whether the caret element has to be inserted inside the current plain substring\n    if (isNumber(caretPositionInMarkup) && caretPositionInMarkup >= index && caretPositionInMarkup <= index + substr.length) {\n      // if yes, split substr at the caret position and insert the caret component\n      var splitIndex = caretPositionInMarkup - index;\n      components.push(renderSubstring(substr.substring(0, splitIndex), substringComponentKey)); // add all following substrings and mention components as children of the caret component\n\n      components = [renderSubstring(substr.substring(splitIndex), substringComponentKey)];\n    } else {\n      components.push(renderSubstring(substr, substringComponentKey));\n    }\n    substringComponentKey++;\n  };\n  var mentionIteratee = function mentionIteratee(markup, index, indexInPlainText, id, display, mentionChildIndex, lastMentionEndIndex) {\n    var key = _generateComponentKey(componentKeys, id);\n    components.push(getMentionComponentForMatch(id, display, mentionChildIndex, key));\n  };\n  var renderSubstring = function renderSubstring(string, key) {\n    // set substring span to hidden, so that Emojis are not shown double in Mobile Safari\n    return /*#__PURE__*/React.createElement(\"span\", _extends({}, style('substring'), {\n      key: key\n    }), string);\n  };\n  var getMentionComponentForMatch = function getMentionComponentForMatch(id, display, mentionChildIndex, key) {\n    var props = {\n      id: id,\n      display: display,\n      key: key\n    };\n    var child = Children.toArray(children)[mentionChildIndex];\n    return /*#__PURE__*/React.cloneElement(child, props);\n  };\n  var renderHighlighterCaret = function renderHighlighterCaret(children) {\n    return /*#__PURE__*/React.createElement(\"span\", _extends({}, style('caret'), {\n      ref: setCaretElement,\n      key: \"caret\"\n    }), children);\n  };\n  iterateMentionsMarkup(value, config, mentionIteratee, textIteratee); // append a span containing a space, to ensure the last text line has the correct height\n\n  components.push(' ');\n  if (components !== resultComponents) {\n    // if a caret component is to be rendered, add all components that followed as its children\n    resultComponents.push(renderHighlighterCaret(components));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, style, {\n    ref: containerRef\n  }), resultComponents);\n}\nHighlighter.propTypes = {\n  selectionStart: PropTypes.number,\n  selectionEnd: PropTypes.number,\n  value: PropTypes.string.isRequired,\n  onCaretPositionChange: PropTypes.func.isRequired,\n  containerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\n  })]),\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element)]).isRequired\n};\nvar styled = createDefaultStyle({\n  position: 'relative',\n  boxSizing: 'border-box',\n  width: '100%',\n  color: 'transparent',\n  overflow: 'hidden',\n  whiteSpace: 'pre-wrap',\n  wordWrap: 'break-word',\n  border: '1px solid transparent',\n  textAlign: 'start',\n  '&singleLine': {\n    whiteSpace: 'pre',\n    wordWrap: null\n  },\n  substring: {\n    visibility: 'hidden'\n  }\n}, function (props) {\n  return {\n    '&singleLine': props.singleLine\n  };\n});\nvar Highlighter$1 = styled(Highlighter);\nfunction Suggestion(_ref) {\n  var id = _ref.id,\n    focused = _ref.focused,\n    ignoreAccents = _ref.ignoreAccents,\n    index = _ref.index,\n    onClick = _ref.onClick,\n    onMouseEnter = _ref.onMouseEnter,\n    query = _ref.query,\n    renderSuggestion = _ref.renderSuggestion,\n    suggestion = _ref.suggestion,\n    style = _ref.style,\n    className = _ref.className,\n    classNames = _ref.classNames;\n  var rest = {\n    onClick: onClick,\n    onMouseEnter: onMouseEnter\n  };\n  var renderContent = function renderContent() {\n    var display = getDisplay();\n    var highlightedDisplay = renderHighlightedDisplay(display);\n    if (renderSuggestion) {\n      return renderSuggestion(suggestion, query, highlightedDisplay, index, focused);\n    }\n    return highlightedDisplay;\n  };\n  var getDisplay = function getDisplay() {\n    if (typeof suggestion === 'string') {\n      return suggestion;\n    }\n    var id = suggestion.id,\n      display = suggestion.display;\n    if (id === undefined || !display) {\n      return id;\n    }\n    return display;\n  };\n  var renderHighlightedDisplay = function renderHighlightedDisplay(display) {\n    var i = getSubstringIndex(display, query, ignoreAccents);\n    if (i === -1) {\n      return /*#__PURE__*/React.createElement(\"span\", style('display'), display);\n    }\n    return /*#__PURE__*/React.createElement(\"span\", style('display'), display.substring(0, i), /*#__PURE__*/React.createElement(\"b\", style('highlight'), display.substring(i, i + query.length)), display.substring(i + query.length));\n  };\n  return /*#__PURE__*/React.createElement(\"li\", _extends({\n    id: id,\n    role: \"option\",\n    \"aria-selected\": focused\n  }, rest, style), renderContent());\n}\nSuggestion.propTypes = {\n  id: PropTypes.string.isRequired,\n  query: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  ignoreAccents: PropTypes.bool,\n  suggestion: PropTypes.oneOfType([PropTypes.string, PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    display: PropTypes.string\n  })]).isRequired,\n  renderSuggestion: PropTypes.func,\n  focused: PropTypes.bool\n};\nvar styled$1 = createDefaultStyle({\n  cursor: 'pointer'\n}, function (props) {\n  return {\n    '&focused': props.focused\n  };\n});\nvar Suggestion$1 = styled$1(Suggestion);\nfunction LoadingIndicator(_ref) {\n  var style = _ref.style,\n    className = _ref.className,\n    classNames = _ref.classNames;\n  var styles = useStyles(defaultstyle, {\n    style: style,\n    className: className,\n    classNames: classNames\n  });\n  var spinnerStyles = styles('spinner');\n  return /*#__PURE__*/React.createElement(\"div\", styles, /*#__PURE__*/React.createElement(\"div\", spinnerStyles, /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element1'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element2'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element3'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element4'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element5']))));\n}\nvar defaultstyle = {};\nfunction SuggestionsOverlay(_ref) {\n  var id = _ref.id,\n    _ref$suggestions = _ref.suggestions,\n    suggestions = _ref$suggestions === void 0 ? {} : _ref$suggestions,\n    a11ySuggestionsListLabel = _ref.a11ySuggestionsListLabel,\n    focusIndex = _ref.focusIndex,\n    position = _ref.position,\n    left = _ref.left,\n    right = _ref.right,\n    top = _ref.top,\n    scrollFocusedIntoView = _ref.scrollFocusedIntoView,\n    isLoading = _ref.isLoading,\n    isOpened = _ref.isOpened,\n    _ref$onSelect = _ref.onSelect,\n    onSelect = _ref$onSelect === void 0 ? function () {\n      return null;\n    } : _ref$onSelect,\n    ignoreAccents = _ref.ignoreAccents,\n    containerRef = _ref.containerRef,\n    children = _ref.children,\n    style = _ref.style,\n    customSuggestionsContainer = _ref.customSuggestionsContainer,\n    onMouseDown = _ref.onMouseDown,\n    onMouseEnter = _ref.onMouseEnter;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    ulElement = _useState2[0],\n    setUlElement = _useState2[1];\n  useEffect(function () {\n    if (!ulElement || ulElement.offsetHeight >= ulElement.scrollHeight || !scrollFocusedIntoView) {\n      return;\n    }\n    var scrollTop = ulElement.scrollTop;\n    var _ulElement$children$f = ulElement.children[focusIndex].getBoundingClientRect(),\n      top = _ulElement$children$f.top,\n      bottom = _ulElement$children$f.bottom;\n    var _ulElement$getBoundin = ulElement.getBoundingClientRect(),\n      topContainer = _ulElement$getBoundin.top;\n    top = top - topContainer + scrollTop;\n    bottom = bottom - topContainer + scrollTop;\n    if (top < scrollTop) {\n      ulElement.scrollTop = top;\n    } else if (bottom > ulElement.offsetHeight) {\n      ulElement.scrollTop = bottom - ulElement.offsetHeight;\n    }\n  }, []);\n  var renderSuggestions = function renderSuggestions() {\n    var suggestionsToRender = Object.values(suggestions).reduce(function (accResults, _ref2) {\n      var results = _ref2.results,\n        queryInfo = _ref2.queryInfo;\n      return [].concat(_toConsumableArray(accResults), _toConsumableArray(results.map(function (result, index) {\n        return renderSuggestion(result, queryInfo, accResults.length + index);\n      })));\n    }, []);\n    if (customSuggestionsContainer) return customSuggestionsContainer(suggestionsToRender);else return suggestionsToRender;\n  };\n  var renderSuggestion = function renderSuggestion(result, queryInfo, index) {\n    var isFocused = index === focusIndex;\n    var childIndex = queryInfo.childIndex,\n      query = queryInfo.query;\n    var renderSuggestion = Children.toArray(children)[childIndex].props.renderSuggestion;\n    return /*#__PURE__*/React.createElement(Suggestion$1, {\n      style: style('item'),\n      key: \"\".concat(childIndex, \"-\").concat(getID(result)),\n      id: getSuggestionHtmlId(id, index),\n      query: query,\n      index: index,\n      ignoreAccents: ignoreAccents,\n      renderSuggestion: renderSuggestion,\n      suggestion: result,\n      focused: isFocused,\n      onClick: function onClick() {\n        return select(result, queryInfo);\n      },\n      onMouseEnter: function onMouseEnter() {\n        return handleMouseEnter(index);\n      }\n    });\n  };\n  var renderLoadingIndicator = function renderLoadingIndicator() {\n    if (!isLoading) {\n      return;\n    }\n    return /*#__PURE__*/React.createElement(LoadingIndicator, {\n      style: style('loadingIndicator')\n    });\n  };\n  var handleMouseEnter = function handleMouseEnter(index, ev) {\n    if (onMouseEnter) {\n      onMouseEnter(index);\n    }\n  };\n  var select = function select(suggestion, queryInfo) {\n    onSelect(suggestion, queryInfo);\n  };\n  var getID = function getID(suggestion) {\n    if (typeof suggestion === 'string') {\n      return suggestion;\n    }\n    return suggestion.id;\n  };\n  if (!isOpened) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, inline({\n    position: position || 'absolute',\n    left: left,\n    right: right,\n    top: top\n  }, style), {\n    onMouseDown: onMouseDown,\n    ref: containerRef\n  }), /*#__PURE__*/React.createElement(\"ul\", _extends({\n    ref: setUlElement,\n    id: id,\n    role: \"listbox\",\n    \"aria-label\": a11ySuggestionsListLabel\n  }, style('list')), renderSuggestions()), renderLoadingIndicator());\n}\nSuggestionsOverlay.propTypes = {\n  id: PropTypes.string.isRequired,\n  suggestions: PropTypes.object.isRequired,\n  a11ySuggestionsListLabel: PropTypes.string,\n  focusIndex: PropTypes.number,\n  position: PropTypes.string,\n  left: PropTypes.number,\n  right: PropTypes.number,\n  top: PropTypes.number,\n  scrollFocusedIntoView: PropTypes.bool,\n  isLoading: PropTypes.bool,\n  isOpened: PropTypes.bool.isRequired,\n  onSelect: PropTypes.func,\n  ignoreAccents: PropTypes.bool,\n  customSuggestionsContainer: PropTypes.any,\n  containerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\n  })])\n};\nvar styled$2 = createDefaultStyle({\n  zIndex: 1,\n  backgroundColor: 'white',\n  marginTop: 14,\n  minWidth: 100,\n  list: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none'\n  }\n});\nvar SuggestionsOverlay$1 = styled$2(SuggestionsOverlay);\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar makeTriggerRegex = function makeTriggerRegex(trigger) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (trigger instanceof RegExp) {\n    return trigger;\n  } else {\n    var allowSpaceInQuery = options.allowSpaceInQuery;\n    var escapedTriggerChar = escapeRegex(trigger); // first capture group is the part to be replaced on completion\n    // second capture group is for extracting the search query\n\n    return new RegExp(\"(?:^|\\\\s)(\".concat(escapedTriggerChar, \"([^\").concat(allowSpaceInQuery ? '' : '\\\\s').concat(escapedTriggerChar, \"]*))$\"));\n  }\n};\nvar getDataProvider = function getDataProvider(data, ignoreAccents) {\n  if (data instanceof Array) {\n    // if data is an array, create a function to query that\n    return function (query, callback) {\n      var results = [];\n      for (var i = 0, l = data.length; i < l; ++i) {\n        var display = data[i].display || data[i].id;\n        if (getSubstringIndex(display, query, ignoreAccents) >= 0) {\n          results.push(data[i]);\n        }\n      }\n      return results;\n    };\n  } else {\n    // expect data to be a query function\n    return data;\n  }\n};\nvar KEY = {\n  TAB: 9,\n  RETURN: 13,\n  ESC: 27,\n  UP: 38,\n  DOWN: 40\n};\nvar isComposing = false;\nvar propTypes = {\n  /**\n   * If set to `true` a regular text input element will be rendered\n   * instead of a textarea\n   */\n  singleLine: PropTypes.bool,\n  allowSpaceInQuery: PropTypes.bool,\n  allowSuggestionsAboveCursor: PropTypes.bool,\n  forceSuggestionsAboveCursor: PropTypes.bool,\n  ignoreAccents: PropTypes.bool,\n  a11ySuggestionsListLabel: PropTypes.string,\n  value: PropTypes.string,\n  onKeyDown: PropTypes.func,\n  customSuggestionsContainer: PropTypes.func,\n  onSelect: PropTypes.func,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  suggestionsPortalHost: typeof Element === 'undefined' ? PropTypes.any : PropTypes.PropTypes.instanceOf(Element),\n  inputRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\n  })]),\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element)]).isRequired\n};\nvar MentionsInput = /*#__PURE__*/function (_React$Component) {\n  _inherits(MentionsInput, _React$Component);\n  var _super = _createSuper(MentionsInput);\n  function MentionsInput(_props) {\n    var _this;\n    _classCallCheck(this, MentionsInput);\n    _this = _super.call(this, _props);\n    _defineProperty(_assertThisInitialized(_this), \"setContainerElement\", function (el) {\n      _this.containerElement = el;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getInputProps\", function () {\n      var _this$props = _this.props,\n        readOnly = _this$props.readOnly,\n        disabled = _this$props.disabled,\n        style = _this$props.style; // pass all props that neither we, nor substyle, consume through to the input control\n\n      var props = omit(_this.props, ['style', 'classNames', 'className'],\n      // substyle props\n      keys(propTypes));\n      return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, props), style('input')), {}, {\n        value: _this.getPlainText(),\n        onScroll: _this.updateHighlighterScroll\n      }, !readOnly && !disabled && {\n        onChange: _this.handleChange,\n        onSelect: _this.handleSelect,\n        onKeyDown: _this.handleKeyDown,\n        onBlur: _this.handleBlur,\n        onCompositionStart: _this.handleCompositionStart,\n        onCompositionEnd: _this.handleCompositionEnd\n      }), _this.isOpened() && {\n        role: 'combobox',\n        'aria-controls': _this.uuidSuggestionsOverlay,\n        'aria-expanded': true,\n        'aria-autocomplete': 'list',\n        'aria-haspopup': 'listbox',\n        'aria-activedescendant': getSuggestionHtmlId(_this.uuidSuggestionsOverlay, _this.state.focusIndex)\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"renderControl\", function () {\n      var _this$props2 = _this.props,\n        singleLine = _this$props2.singleLine,\n        style = _this$props2.style;\n      var inputProps = _this.getInputProps();\n      return /*#__PURE__*/React.createElement(\"div\", style('control'), _this.renderHighlighter(), singleLine ? _this.renderInput(inputProps) : _this.renderTextarea(inputProps));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"renderInput\", function (props) {\n      return /*#__PURE__*/React.createElement(\"input\", _extends({\n        type: \"text\",\n        ref: _this.setInputRef\n      }, props));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"renderTextarea\", function (props) {\n      return /*#__PURE__*/React.createElement(\"textarea\", _extends({\n        ref: _this.setInputRef\n      }, props));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"setInputRef\", function (el) {\n      _this.inputElement = el;\n      var inputRef = _this.props.inputRef;\n      if (typeof inputRef === 'function') {\n        inputRef(el);\n      } else if (inputRef) {\n        inputRef.current = el;\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"setSuggestionsElement\", function (el) {\n      _this.suggestionsElement = el;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"renderSuggestionsOverlay\", function () {\n      if (!isNumber(_this.state.selectionStart)) {\n        // do not show suggestions when the input does not have the focus\n        return null;\n      }\n      var _this$state$suggestio = _this.state.suggestionsPosition,\n        position = _this$state$suggestio.position,\n        left = _this$state$suggestio.left,\n        top = _this$state$suggestio.top,\n        right = _this$state$suggestio.right;\n      var suggestionsNode = /*#__PURE__*/React.createElement(SuggestionsOverlay$1, {\n        id: _this.uuidSuggestionsOverlay,\n        style: _this.props.style('suggestions'),\n        position: position,\n        left: left,\n        top: top,\n        right: right,\n        focusIndex: _this.state.focusIndex,\n        scrollFocusedIntoView: _this.state.scrollFocusedIntoView,\n        containerRef: _this.setSuggestionsElement,\n        suggestions: _this.state.suggestions,\n        customSuggestionsContainer: _this.props.customSuggestionsContainer,\n        onSelect: _this.addMention,\n        onMouseDown: _this.handleSuggestionsMouseDown,\n        onMouseEnter: _this.handleSuggestionsMouseEnter,\n        isLoading: _this.isLoading(),\n        isOpened: _this.isOpened(),\n        ignoreAccents: _this.props.ignoreAccents,\n        a11ySuggestionsListLabel: _this.props.a11ySuggestionsListLabel\n      }, _this.props.children);\n      if (_this.props.suggestionsPortalHost) {\n        return /*#__PURE__*/ReactDOM.createPortal(suggestionsNode, _this.props.suggestionsPortalHost);\n      } else {\n        return suggestionsNode;\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"renderHighlighter\", function () {\n      var _this$state = _this.state,\n        selectionStart = _this$state.selectionStart,\n        selectionEnd = _this$state.selectionEnd;\n      var _this$props3 = _this.props,\n        singleLine = _this$props3.singleLine,\n        children = _this$props3.children,\n        value = _this$props3.value,\n        style = _this$props3.style;\n      return /*#__PURE__*/React.createElement(Highlighter$1, {\n        containerRef: _this.setHighlighterElement,\n        style: style('highlighter'),\n        value: value,\n        singleLine: singleLine,\n        selectionStart: selectionStart,\n        selectionEnd: selectionEnd,\n        onCaretPositionChange: _this.handleCaretPositionChange\n      }, children);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"setHighlighterElement\", function (el) {\n      _this.highlighterElement = el;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleCaretPositionChange\", function (position) {\n      _this.setState({\n        caretPosition: position\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getPlainText\", function () {\n      return getPlainText(_this.props.value || '', readConfigFromChildren(_this.props.children));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"executeOnChange\", function (event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      if (_this.props.onChange) {\n        var _this$props4;\n        return (_this$props4 = _this.props).onChange.apply(_this$props4, [event].concat(args));\n      }\n      if (_this.props.valueLink) {\n        var _this$props$valueLink;\n        return (_this$props$valueLink = _this.props.valueLink).requestChange.apply(_this$props$valueLink, [event.target.value].concat(args));\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (ev) {\n      isComposing = false;\n      if (isIE()) {\n        // if we are inside iframe, we need to find activeElement within its contentDocument\n        var currentDocument = document.activeElement && document.activeElement.contentDocument || document;\n        if (currentDocument.activeElement !== ev.target) {\n          // fix an IE bug (blur from empty input element with placeholder attribute trigger \"input\" event)\n          return;\n        }\n      }\n      var value = _this.props.value || '';\n      var config = readConfigFromChildren(_this.props.children);\n      var newPlainTextValue = ev.target.value; // Derive the new value to set by applying the local change in the textarea's plain text\n\n      var newValue = applyChangeToValue(value, newPlainTextValue, {\n        selectionStartBefore: _this.state.selectionStart,\n        selectionEndBefore: _this.state.selectionEnd,\n        selectionEndAfter: ev.target.selectionEnd\n      }, config); // In case a mention is deleted, also adjust the new plain text value\n\n      newPlainTextValue = getPlainText(newValue, config); // Save current selection after change to be able to restore caret position after rerendering\n\n      var selectionStart = ev.target.selectionStart;\n      var selectionEnd = ev.target.selectionEnd;\n      var setSelectionAfterMentionChange = false; // Adjust selection range in case a mention will be deleted by the characters outside of the\n      // selection range that are automatically deleted\n\n      var startOfMention = findStartOfMentionInPlainText(value, config, selectionStart);\n      if (startOfMention !== undefined && _this.state.selectionEnd > startOfMention) {\n        // only if a deletion has taken place\n        selectionStart = startOfMention + (ev.nativeEvent.data ? ev.nativeEvent.data.length : 0);\n        selectionEnd = selectionStart;\n        setSelectionAfterMentionChange = true;\n      }\n      _this.setState({\n        selectionStart: selectionStart,\n        selectionEnd: selectionEnd,\n        setSelectionAfterMentionChange: setSelectionAfterMentionChange\n      });\n      var mentions = getMentions(newValue, config); // Propagate change\n      // let handleChange = this.getOnChange(this.props) || emptyFunction;\n\n      var eventMock = {\n        target: {\n          value: newValue\n        }\n      }; // this.props.onChange.call(this, eventMock, newValue, newPlainTextValue, mentions);\n\n      _this.executeOnChange(eventMock, newValue, newPlainTextValue, mentions);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleSelect\", function (ev) {\n      // keep track of selection range / caret position\n      _this.setState({\n        selectionStart: ev.target.selectionStart,\n        selectionEnd: ev.target.selectionEnd\n      }); // do nothing while a IME composition session is active\n\n      if (isComposing) return; // refresh suggestions queries\n\n      var el = _this.inputElement;\n      if (ev.target.selectionStart === ev.target.selectionEnd) {\n        _this.updateMentionsQueries(el.value, ev.target.selectionStart);\n      } else {\n        _this.clearSuggestions();\n      } // sync highlighters scroll position\n\n      _this.updateHighlighterScroll();\n      _this.props.onSelect(ev);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleKeyDown\", function (ev) {\n      // do not intercept key events if the suggestions overlay is not shown\n      var suggestionsCount = countSuggestions(_this.state.suggestions);\n      if (suggestionsCount === 0 || !_this.suggestionsElement) {\n        _this.props.onKeyDown(ev);\n        return;\n      }\n      if (Object.values(KEY).indexOf(ev.keyCode) >= 0) {\n        ev.preventDefault();\n        ev.stopPropagation();\n      }\n      switch (ev.keyCode) {\n        case KEY.ESC:\n          {\n            _this.clearSuggestions();\n            return;\n          }\n        case KEY.DOWN:\n          {\n            _this.shiftFocus(+1);\n            return;\n          }\n        case KEY.UP:\n          {\n            _this.shiftFocus(-1);\n            return;\n          }\n        case KEY.RETURN:\n          {\n            _this.selectFocused();\n            return;\n          }\n        case KEY.TAB:\n          {\n            _this.selectFocused();\n            return;\n          }\n        default:\n          {\n            return;\n          }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"shiftFocus\", function (delta) {\n      var suggestionsCount = countSuggestions(_this.state.suggestions);\n      _this.setState({\n        focusIndex: (suggestionsCount + _this.state.focusIndex + delta) % suggestionsCount,\n        scrollFocusedIntoView: true\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"selectFocused\", function () {\n      var _this$state2 = _this.state,\n        suggestions = _this$state2.suggestions,\n        focusIndex = _this$state2.focusIndex;\n      var _Object$values$reduce = Object.values(suggestions).reduce(function (acc, _ref) {\n          var results = _ref.results,\n            queryInfo = _ref.queryInfo;\n          return [].concat(_toConsumableArray(acc), _toConsumableArray(results.map(function (result) {\n            return {\n              result: result,\n              queryInfo: queryInfo\n            };\n          })));\n        }, [])[focusIndex],\n        result = _Object$values$reduce.result,\n        queryInfo = _Object$values$reduce.queryInfo;\n      _this.addMention(result, queryInfo);\n      _this.setState({\n        focusIndex: 0\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleBlur\", function (ev) {\n      var clickedSuggestion = _this._suggestionsMouseDown;\n      _this._suggestionsMouseDown = false; // only reset selection if the mousedown happened on an element\n      // other than the suggestions overlay\n\n      if (!clickedSuggestion) {\n        _this.setState({\n          selectionStart: null,\n          selectionEnd: null\n        });\n      }\n      window.setTimeout(function () {\n        _this.updateHighlighterScroll();\n      }, 1);\n      _this.props.onBlur(ev, clickedSuggestion);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleSuggestionsMouseDown\", function (ev) {\n      _this._suggestionsMouseDown = true;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleSuggestionsMouseEnter\", function (focusIndex) {\n      _this.setState({\n        focusIndex: focusIndex,\n        scrollFocusedIntoView: false\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"updateSuggestionsPosition\", function () {\n      var caretPosition = _this.state.caretPosition;\n      var _this$props5 = _this.props,\n        suggestionsPortalHost = _this$props5.suggestionsPortalHost,\n        allowSuggestionsAboveCursor = _this$props5.allowSuggestionsAboveCursor,\n        forceSuggestionsAboveCursor = _this$props5.forceSuggestionsAboveCursor;\n      if (!caretPosition || !_this.suggestionsElement) {\n        return;\n      }\n      var suggestions = _this.suggestionsElement;\n      var highlighter = _this.highlighterElement; // first get viewport-relative position (highlighter is offsetParent of caret):\n\n      var caretOffsetParentRect = highlighter.getBoundingClientRect();\n      var caretHeight = getComputedStyleLengthProp(highlighter, 'font-size');\n      var viewportRelative = {\n        left: caretOffsetParentRect.left + caretPosition.left,\n        top: caretOffsetParentRect.top + caretPosition.top + caretHeight\n      };\n      var viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n      if (!suggestions) {\n        return;\n      }\n      var position = {}; // if suggestions menu is in a portal, update position to be releative to its portal node\n\n      if (suggestionsPortalHost) {\n        position.position = 'fixed';\n        var left = viewportRelative.left;\n        var top = viewportRelative.top; // absolute/fixed positioned elements are positioned according to their entire box including margins; so we remove margins here:\n\n        left -= getComputedStyleLengthProp(suggestions, 'margin-left');\n        top -= getComputedStyleLengthProp(suggestions, 'margin-top'); // take into account highlighter/textinput scrolling:\n\n        left -= highlighter.scrollLeft;\n        top -= highlighter.scrollTop; // guard for mentions suggestions list clipped by right edge of window\n\n        var viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n        if (left + suggestions.offsetWidth > viewportWidth) {\n          position.left = Math.max(0, viewportWidth - suggestions.offsetWidth);\n        } else {\n          position.left = left;\n        } // guard for mentions suggestions list clipped by bottom edge of window if allowSuggestionsAboveCursor set to true.\n        // Move the list up above the caret if it's getting cut off by the bottom of the window, provided that the list height\n        // is small enough to NOT cover up the caret\n\n        if (allowSuggestionsAboveCursor && top + suggestions.offsetHeight > viewportHeight && suggestions.offsetHeight < top - caretHeight || forceSuggestionsAboveCursor) {\n          position.top = Math.max(0, top - suggestions.offsetHeight - caretHeight);\n        } else {\n          position.top = top;\n        }\n      } else {\n        var _left = caretPosition.left - highlighter.scrollLeft;\n        var _top = caretPosition.top - highlighter.scrollTop; // guard for mentions suggestions list clipped by right edge of window\n\n        if (_left + suggestions.offsetWidth > _this.containerElement.offsetWidth) {\n          position.right = 0;\n        } else {\n          position.left = _left;\n        } // guard for mentions suggestions list clipped by bottom edge of window if allowSuggestionsAboveCursor set to true.\n        // move the list up above the caret if it's getting cut off by the bottom of the window, provided that the list height\n        // is small enough to NOT cover up the caret\n\n        if (allowSuggestionsAboveCursor && viewportRelative.top - highlighter.scrollTop + suggestions.offsetHeight > viewportHeight && suggestions.offsetHeight < caretOffsetParentRect.top - caretHeight - highlighter.scrollTop || forceSuggestionsAboveCursor) {\n          position.top = _top - suggestions.offsetHeight - caretHeight;\n        } else {\n          position.top = _top;\n        }\n      }\n      if (position.left === _this.state.suggestionsPosition.left && position.top === _this.state.suggestionsPosition.top && position.position === _this.state.suggestionsPosition.position) {\n        return;\n      }\n      _this.setState({\n        suggestionsPosition: position\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"updateHighlighterScroll\", function () {\n      var input = _this.inputElement;\n      var highlighter = _this.highlighterElement;\n      if (!input || !highlighter) {\n        // since the invocation of this function is deferred,\n        // the whole component may have been unmounted in the meanwhile\n        return;\n      }\n      highlighter.scrollLeft = input.scrollLeft;\n      highlighter.scrollTop = input.scrollTop;\n      highlighter.height = input.height;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleCompositionStart\", function () {\n      isComposing = true;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleCompositionEnd\", function () {\n      isComposing = false;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"setSelection\", function (selectionStart, selectionEnd) {\n      if (selectionStart === null || selectionEnd === null) return;\n      var el = _this.inputElement;\n      if (el.setSelectionRange) {\n        el.setSelectionRange(selectionStart, selectionEnd);\n      } else if (el.createTextRange) {\n        var range = el.createTextRange();\n        range.collapse(true);\n        range.moveEnd('character', selectionEnd);\n        range.moveStart('character', selectionStart);\n        range.select();\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"updateMentionsQueries\", function (plainTextValue, caretPosition) {\n      // Invalidate previous queries. Async results for previous queries will be neglected.\n      _this._queryId++;\n      _this.suggestions = {};\n      _this.setState({\n        suggestions: {}\n      });\n      var value = _this.props.value || '';\n      var children = _this.props.children;\n      var config = readConfigFromChildren(children);\n      var positionInValue = mapPlainTextIndex(value, config, caretPosition, 'NULL'); // If caret is inside of mention, do not query\n\n      if (positionInValue === null) {\n        return;\n      } // Extract substring in between the end of the previous mention and the caret\n\n      var substringStartIndex = getEndOfLastMention(value.substring(0, positionInValue), config);\n      var substring = plainTextValue.substring(substringStartIndex, caretPosition); // Check if suggestions have to be shown:\n      // Match the trigger patterns of all Mention children on the extracted substring\n\n      React.Children.forEach(children, function (child, childIndex) {\n        if (!child) {\n          return;\n        }\n        var regex = makeTriggerRegex(child.props.trigger, _this.props);\n        var match = substring.match(regex);\n        if (match) {\n          var querySequenceStart = substringStartIndex + substring.indexOf(match[1], match.index);\n          _this.queryData(match[2], childIndex, querySequenceStart, querySequenceStart + match[1].length, plainTextValue);\n        }\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"clearSuggestions\", function () {\n      // Invalidate previous queries. Async results for previous queries will be neglected.\n      _this._queryId++;\n      _this.suggestions = {};\n      _this.setState({\n        suggestions: {},\n        focusIndex: 0\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"queryData\", function (query, childIndex, querySequenceStart, querySequenceEnd, plainTextValue) {\n      var _this$props6 = _this.props,\n        children = _this$props6.children,\n        ignoreAccents = _this$props6.ignoreAccents;\n      var mentionChild = Children.toArray(children)[childIndex];\n      var provideData = getDataProvider(mentionChild.props.data, ignoreAccents);\n      var syncResult = provideData(query, _this.updateSuggestions.bind(null, _this._queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue));\n      if (syncResult instanceof Array) {\n        _this.updateSuggestions(_this._queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue, syncResult);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"updateSuggestions\", function (queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue, results) {\n      // neglect async results from previous queries\n      if (queryId !== _this._queryId) return; // save in property so that multiple sync state updates from different mentions sources\n      // won't overwrite each other\n\n      _this.suggestions = _objectSpread(_objectSpread({}, _this.suggestions), {}, _defineProperty({}, childIndex, {\n        queryInfo: {\n          childIndex: childIndex,\n          query: query,\n          querySequenceStart: querySequenceStart,\n          querySequenceEnd: querySequenceEnd,\n          plainTextValue: plainTextValue\n        },\n        results: results\n      }));\n      var focusIndex = _this.state.focusIndex;\n      var suggestionsCount = countSuggestions(_this.suggestions);\n      _this.setState({\n        suggestions: _this.suggestions,\n        focusIndex: focusIndex >= suggestionsCount ? Math.max(suggestionsCount - 1, 0) : focusIndex\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"addMention\", function (_ref2, _ref3) {\n      var id = _ref2.id,\n        display = _ref2.display;\n      var childIndex = _ref3.childIndex,\n        querySequenceStart = _ref3.querySequenceStart,\n        querySequenceEnd = _ref3.querySequenceEnd,\n        plainTextValue = _ref3.plainTextValue;\n      // Insert mention in the marked up value at the correct position\n      var value = _this.props.value || '';\n      var config = readConfigFromChildren(_this.props.children);\n      var mentionsChild = Children.toArray(_this.props.children)[childIndex];\n      var _mentionsChild$props = mentionsChild.props,\n        markup = _mentionsChild$props.markup,\n        displayTransform = _mentionsChild$props.displayTransform,\n        appendSpaceOnAdd = _mentionsChild$props.appendSpaceOnAdd,\n        onAdd = _mentionsChild$props.onAdd;\n      var start = mapPlainTextIndex(value, config, querySequenceStart, 'START');\n      var end = start + querySequenceEnd - querySequenceStart;\n      var insert = makeMentionsMarkup(markup, id, display);\n      if (appendSpaceOnAdd) {\n        insert += ' ';\n      }\n      var newValue = spliceString(value, start, end, insert); // Refocus input and set caret position to end of mention\n\n      _this.inputElement.focus();\n      var displayValue = displayTransform(id, display);\n      if (appendSpaceOnAdd) {\n        displayValue += ' ';\n      }\n      var newCaretPosition = querySequenceStart + displayValue.length;\n      _this.setState({\n        selectionStart: newCaretPosition,\n        selectionEnd: newCaretPosition,\n        setSelectionAfterMentionChange: true\n      }); // Propagate change\n\n      var eventMock = {\n        target: {\n          value: newValue\n        }\n      };\n      var mentions = getMentions(newValue, config);\n      var newPlainTextValue = spliceString(plainTextValue, querySequenceStart, querySequenceEnd, displayValue);\n      _this.executeOnChange(eventMock, newValue, newPlainTextValue, mentions);\n      if (onAdd) {\n        onAdd(id, display, start, end);\n      } // Make sure the suggestions overlay is closed\n\n      _this.clearSuggestions();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isLoading\", function () {\n      var isLoading = false;\n      React.Children.forEach(_this.props.children, function (child) {\n        isLoading = isLoading || child && child.props.isLoading;\n      });\n      return isLoading;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"isOpened\", function () {\n      return isNumber(_this.state.selectionStart) && (countSuggestions(_this.state.suggestions) !== 0 || _this.isLoading());\n    });\n    _defineProperty(_assertThisInitialized(_this), \"_queryId\", 0);\n    _this.suggestions = {};\n    _this.uuidSuggestionsOverlay = Math.random().toString(16).substring(2);\n    _this.handleCopy = _this.handleCopy.bind(_assertThisInitialized(_this));\n    _this.handleCut = _this.handleCut.bind(_assertThisInitialized(_this));\n    _this.handlePaste = _this.handlePaste.bind(_assertThisInitialized(_this));\n    _this.state = {\n      focusIndex: 0,\n      selectionStart: null,\n      selectionEnd: null,\n      suggestions: {},\n      caretPosition: null,\n      suggestionsPosition: {}\n    };\n    return _this;\n  }\n  _createClass(MentionsInput, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('copy', this.handleCopy);\n      document.addEventListener('cut', this.handleCut);\n      document.addEventListener('paste', this.handlePaste);\n      this.updateSuggestionsPosition();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      // Update position of suggestions unless this componentDidUpdate was\n      // triggered by an update to suggestionsPosition.\n      if (prevState.suggestionsPosition === this.state.suggestionsPosition) {\n        this.updateSuggestionsPosition();\n      } // maintain selection in case a mention is added/removed causing\n      // the cursor to jump to the end\n\n      if (this.state.setSelectionAfterMentionChange) {\n        this.setState({\n          setSelectionAfterMentionChange: false\n        });\n        this.setSelection(this.state.selectionStart, this.state.selectionEnd);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('copy', this.handleCopy);\n      document.removeEventListener('cut', this.handleCut);\n      document.removeEventListener('paste', this.handlePaste);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", _extends({\n        ref: this.setContainerElement\n      }, this.props.style), this.renderControl(), this.renderSuggestionsOverlay());\n    }\n  }, {\n    key: \"handlePaste\",\n    value: function handlePaste(event) {\n      if (event.target !== this.inputElement) {\n        return;\n      }\n      if (!this.supportsClipboardActions(event)) {\n        return;\n      }\n      event.preventDefault();\n      var _this$state3 = this.state,\n        selectionStart = _this$state3.selectionStart,\n        selectionEnd = _this$state3.selectionEnd;\n      var _this$props7 = this.props,\n        value = _this$props7.value,\n        children = _this$props7.children;\n      var config = readConfigFromChildren(children);\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\n      var pastedMentions = event.clipboardData.getData('text/react-mentions');\n      var pastedData = event.clipboardData.getData('text/plain');\n      var newValue = spliceString(value, markupStartIndex, markupEndIndex, pastedMentions || pastedData).replace(/\\r/g, '');\n      var newPlainTextValue = getPlainText(newValue, config);\n      var eventMock = {\n        target: _objectSpread(_objectSpread({}, event.target), {}, {\n          value: newValue\n        })\n      };\n      this.executeOnChange(eventMock, newValue, newPlainTextValue, getMentions(newValue, config)); // Move the cursor position to the end of the pasted data\n\n      var startOfMention = findStartOfMentionInPlainText(value, config, selectionStart);\n      var nextPos = (startOfMention || selectionStart) + getPlainText(pastedMentions || pastedData, config).length;\n      this.setSelection(nextPos, nextPos);\n    }\n  }, {\n    key: \"saveSelectionToClipboard\",\n    value: function saveSelectionToClipboard(event) {\n      // use the actual selectionStart & selectionEnd instead of the one stored\n      // in state to ensure copy & paste also works on disabled inputs & textareas\n      var selectionStart = this.inputElement.selectionStart;\n      var selectionEnd = this.inputElement.selectionEnd;\n      var _this$props8 = this.props,\n        children = _this$props8.children,\n        value = _this$props8.value;\n      var config = readConfigFromChildren(children);\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\n      event.clipboardData.setData('text/plain', event.target.value.slice(selectionStart, selectionEnd));\n      event.clipboardData.setData('text/react-mentions', value.slice(markupStartIndex, markupEndIndex));\n    }\n  }, {\n    key: \"supportsClipboardActions\",\n    value: function supportsClipboardActions(event) {\n      return !!event.clipboardData;\n    }\n  }, {\n    key: \"handleCopy\",\n    value: function handleCopy(event) {\n      if (event.target !== this.inputElement) {\n        return;\n      }\n      if (!this.supportsClipboardActions(event)) {\n        return;\n      }\n      event.preventDefault();\n      this.saveSelectionToClipboard(event);\n    }\n  }, {\n    key: \"handleCut\",\n    value: function handleCut(event) {\n      if (event.target !== this.inputElement) {\n        return;\n      }\n      if (!this.supportsClipboardActions(event)) {\n        return;\n      }\n      event.preventDefault();\n      this.saveSelectionToClipboard(event);\n      var _this$state4 = this.state,\n        selectionStart = _this$state4.selectionStart,\n        selectionEnd = _this$state4.selectionEnd;\n      var _this$props9 = this.props,\n        children = _this$props9.children,\n        value = _this$props9.value;\n      var config = readConfigFromChildren(children);\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\n      var newValue = [value.slice(0, markupStartIndex), value.slice(markupEndIndex)].join('');\n      var newPlainTextValue = getPlainText(newValue, config);\n      var eventMock = {\n        target: _objectSpread(_objectSpread({}, event.target), {}, {\n          value: newPlainTextValue\n        })\n      };\n      this.executeOnChange(eventMock, newValue, newPlainTextValue, getMentions(value, config));\n    } // Handle input element's change event\n  }]);\n\n  return MentionsInput;\n}(React.Component);\n/**\n * Returns the computed length property value for the provided element.\n * Note: According to spec and testing, can count on length values coming back in pixels. See https://developer.mozilla.org/en-US/docs/Web/CSS/used_value#Difference_from_computed_value\n */\n\n_defineProperty(MentionsInput, \"propTypes\", propTypes);\n_defineProperty(MentionsInput, \"defaultProps\", {\n  ignoreAccents: false,\n  singleLine: false,\n  allowSuggestionsAboveCursor: false,\n  onKeyDown: function onKeyDown() {\n    return null;\n  },\n  onSelect: function onSelect() {\n    return null;\n  },\n  onBlur: function onBlur() {\n    return null;\n  }\n});\nvar getComputedStyleLengthProp = function getComputedStyleLengthProp(forElement, propertyName) {\n  var length = parseFloat(window.getComputedStyle(forElement, null).getPropertyValue(propertyName));\n  return isFinite(length) ? length : 0;\n};\nvar isMobileSafari = typeof navigator !== 'undefined' && /iPhone|iPad|iPod/i.test(navigator.userAgent);\nvar styled$3 = createDefaultStyle({\n  position: 'relative',\n  overflowY: 'visible',\n  input: {\n    display: 'block',\n    width: '100%',\n    position: 'absolute',\n    margin: 0,\n    top: 0,\n    left: 0,\n    boxSizing: 'border-box',\n    backgroundColor: 'transparent',\n    fontFamily: 'inherit',\n    fontSize: 'inherit',\n    letterSpacing: 'inherit'\n  },\n  '&multiLine': {\n    input: _objectSpread({\n      height: '100%',\n      bottom: 0,\n      overflow: 'hidden',\n      resize: 'none'\n    }, isMobileSafari ? {\n      marginTop: 1,\n      marginLeft: -3\n    } : null)\n  }\n}, function (_ref4) {\n  var singleLine = _ref4.singleLine;\n  return {\n    '&singleLine': singleLine,\n    '&multiLine': !singleLine\n  };\n});\nvar MentionsInput$1 = styled$3(MentionsInput);\nvar defaultStyle = {\n  fontWeight: 'inherit'\n};\nvar Mention = function Mention(_ref) {\n  var display = _ref.display,\n    style = _ref.style,\n    className = _ref.className,\n    classNames = _ref.classNames;\n  var styles = useStyles(defaultStyle, {\n    style: style,\n    className: className,\n    classNames: classNames\n  });\n  return /*#__PURE__*/React.createElement(\"strong\", styles, display);\n};\nMention.propTypes = {\n  /**\n   * Called when a new mention is added in the input\n   *\n   * Example:\n   *\n   * ```js\n   * function(id, display) {\n   *   console.log(\"user \" + display + \" was mentioned!\");\n   * }\n   * ```\n   */\n  onAdd: PropTypes.func,\n  onRemove: PropTypes.func,\n  renderSuggestion: PropTypes.func,\n  trigger: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(RegExp)]),\n  markup: PropTypes.string,\n  displayTransform: PropTypes.func,\n  /**\n   * If set to `true` spaces will not interrupt matching suggestions\n   */\n  allowSpaceInQuery: PropTypes.bool,\n  isLoading: PropTypes.bool\n};\nMention.defaultProps = {\n  trigger: '@',\n  markup: '@[__display__](__id__)',\n  displayTransform: function displayTransform(id, display) {\n    return display || id;\n  },\n  onAdd: function onAdd() {\n    return null;\n  },\n  onRemove: function onRemove() {\n    return null;\n  },\n  renderSuggestion: null,\n  isLoading: false,\n  appendSpaceOnAdd: false\n};\nexport { Mention, MentionsInput$1 as MentionsInput };","map":{"version":3,"names":["_toConsumableArray","_extends","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","React","Children","useState","useEffect","invariant","_slicedToArray","_objectWithoutProperties","useStyles","inline","PropTypes","ReactDOM","escapeRegex","str","replace","PLACEHOLDERS","id","display","findPositionOfCapturingGroup","markup","parameterName","concat","indexDisplay","indexOf","indexId","combineRegExps","regExps","serializedRegexParser","RegExp","map","regex","_serializedRegexParse","exec","toString","_serializedRegexParse2","regexString","regexFlags","join","countPlaceholders","count","emptyFn","iterateMentionsMarkup","value","config","markupIteratee","textIteratee","arguments","length","undefined","c","accOffset","captureGroupOffsets","_ref","result","match","start","currentPlainTextIndex","offset","find","o","mentionChildIndex","_config$mentionChildI","displayTransform","idPos","displayPos","substr","substring","index","lastIndex","getPlainText","plainTextIndex","plainText","mapPlainTextIndex","indexInPlainText","inMarkupCorrection","substrPlainTextIndex","mentionPlainTextIndex","childIndex","lastMentionEndIndex","spliceString","end","insert","applyChangeToValue","plainTextValue","selectionStartBefore","selectionEndBefore","selectionEndAfter","oldPlainTextValue","lengthDelta","slice","spliceStart","Math","min","spliceEnd","max","mappedSpliceStart","mappedSpliceEnd","controlSpliceStart","controlSpliceEnd","willRemoveMention","newValue","controlPlainTextValue","lastIndexOf","findStartOfMentionInPlainText","foundMention","getMentions","mentions","push","getSuggestionHtmlId","prefix","countSuggestions","suggestions","Object","values","reduce","acc","results","getEndOfLastMention","lastMention","markupToRegex","escapedMarkup","charAfterDisplay","charAfterId","readConfigFromChildren","children","toArray","_ref$props","props","coerceCapturingGroups","numberOfGroups","numberOfPlaceholders","makeMentionsMarkup","lettersDiacritics","base","letters","removeAccents","formattedStr","forEach","letterDiacritics","normalizeString","toLowerCase","getSubstringIndex","ignoreAccents","isIE","document","documentMode","isNumber","val","keys","obj","omit","_len","rest","Array","_key","apply","k","hasOwnProperty","includes","_excluded","createDefaultStyle","defaultStyle","getModifiers","enhance","ComponentToWrap","DefaultStyleEnhancer","style","className","classNames","modifiers","styles","createElement","displayName","name","_generateComponentKey","usedKeys","Highlighter","selectionStart","selectionEnd","_ref$value","onCaretPositionChange","containerRef","singleLine","_useState","left","top","_useState2","position","setPosition","_useState3","_useState4","caretElement","setCaretElement","notifyCaretPosition","offsetLeft","offsetTop","newPosition","caretPositionInMarkup","resultComponents","componentKeys","components","substringComponentKey","splitIndex","renderSubstring","mentionIteratee","key","getMentionComponentForMatch","string","child","cloneElement","renderHighlighterCaret","ref","propTypes","number","isRequired","func","oneOfType","shape","current","Element","any","instanceOf","element","arrayOf","styled","boxSizing","width","color","overflow","whiteSpace","wordWrap","border","textAlign","visibility","Highlighter$1","Suggestion","focused","onClick","onMouseEnter","query","renderSuggestion","suggestion","renderContent","getDisplay","highlightedDisplay","renderHighlightedDisplay","i","role","bool","styled$1","cursor","Suggestion$1","LoadingIndicator","defaultstyle","spinnerStyles","SuggestionsOverlay","_ref$suggestions","a11ySuggestionsListLabel","focusIndex","right","scrollFocusedIntoView","isLoading","isOpened","_ref$onSelect","onSelect","customSuggestionsContainer","onMouseDown","ulElement","setUlElement","offsetHeight","scrollHeight","scrollTop","_ulElement$children$f","getBoundingClientRect","bottom","_ulElement$getBoundin","topContainer","renderSuggestions","suggestionsToRender","accResults","_ref2","queryInfo","isFocused","getID","select","handleMouseEnter","renderLoadingIndicator","ev","object","styled$2","zIndex","backgroundColor","marginTop","minWidth","list","margin","padding","listStyleType","SuggestionsOverlay$1","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","source","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","NewTarget","constructor","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","makeTriggerRegex","trigger","options","allowSpaceInQuery","escapedTriggerChar","getDataProvider","data","callback","l","KEY","TAB","RETURN","ESC","UP","DOWN","isComposing","allowSuggestionsAboveCursor","forceSuggestionsAboveCursor","onKeyDown","onBlur","onChange","suggestionsPortalHost","inputRef","MentionsInput","_React$Component","_super","_props","_this","el","containerElement","_this$props","readOnly","disabled","onScroll","updateHighlighterScroll","handleChange","handleSelect","handleKeyDown","handleBlur","onCompositionStart","handleCompositionStart","onCompositionEnd","handleCompositionEnd","uuidSuggestionsOverlay","state","_this$props2","inputProps","getInputProps","renderHighlighter","renderInput","renderTextarea","type","setInputRef","inputElement","suggestionsElement","_this$state$suggestio","suggestionsPosition","suggestionsNode","setSuggestionsElement","addMention","handleSuggestionsMouseDown","handleSuggestionsMouseEnter","createPortal","_this$state","_this$props3","setHighlighterElement","handleCaretPositionChange","highlighterElement","setState","caretPosition","event","args","_this$props4","valueLink","_this$props$valueLink","requestChange","currentDocument","activeElement","contentDocument","newPlainTextValue","setSelectionAfterMentionChange","startOfMention","nativeEvent","eventMock","executeOnChange","updateMentionsQueries","clearSuggestions","suggestionsCount","keyCode","preventDefault","stopPropagation","shiftFocus","selectFocused","delta","_this$state2","_Object$values$reduce","clickedSuggestion","_suggestionsMouseDown","window","setTimeout","_this$props5","highlighter","caretOffsetParentRect","caretHeight","getComputedStyleLengthProp","viewportRelative","viewportHeight","documentElement","clientHeight","innerHeight","scrollLeft","viewportWidth","clientWidth","innerWidth","offsetWidth","_left","_top","input","height","setSelectionRange","createTextRange","range","collapse","moveEnd","moveStart","_queryId","positionInValue","substringStartIndex","querySequenceStart","queryData","querySequenceEnd","_this$props6","mentionChild","provideData","syncResult","updateSuggestions","bind","queryId","_ref3","mentionsChild","_mentionsChild$props","appendSpaceOnAdd","onAdd","focus","displayValue","newCaretPosition","random","handleCopy","handleCut","handlePaste","componentDidMount","addEventListener","updateSuggestionsPosition","componentDidUpdate","prevProps","prevState","setSelection","componentWillUnmount","removeEventListener","render","setContainerElement","renderControl","renderSuggestionsOverlay","supportsClipboardActions","_this$state3","_this$props7","markupStartIndex","markupEndIndex","pastedMentions","clipboardData","getData","pastedData","nextPos","saveSelectionToClipboard","_this$props8","setData","_this$state4","_this$props9","Component","forElement","propertyName","parseFloat","getComputedStyle","getPropertyValue","isFinite","isMobileSafari","navigator","test","userAgent","styled$3","overflowY","fontFamily","fontSize","letterSpacing","resize","marginLeft","_ref4","MentionsInput$1","fontWeight","Mention","onRemove","defaultProps"],"sources":["/Users/zanemaomac/Desktop/CIS5570/project/project--team_offersoverflow/frontend/node_modules/react-mentions/dist/react-mentions.esm.js"],"sourcesContent":["import _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport React, { Children, useState, useEffect } from 'react';\nimport invariant from 'invariant';\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport useStyles, { inline } from 'substyle';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\n\n// escape RegExp special characters https://stackoverflow.com/a/9310752/5142490\nvar escapeRegex = function escapeRegex(str) {\n  return str.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n};\n\nvar PLACEHOLDERS = {\n  id: '__id__',\n  display: '__display__'\n};\n\nvar findPositionOfCapturingGroup = function findPositionOfCapturingGroup(markup, parameterName) {\n  invariant(parameterName === 'id' || parameterName === 'display', \"Second arg must be either \\\"id\\\" or \\\"display\\\", got: \\\"\".concat(parameterName, \"\\\"\")); // find positions of placeholders in the markup\n\n  var indexDisplay = markup.indexOf(PLACEHOLDERS.display);\n  var indexId = markup.indexOf(PLACEHOLDERS.id); // set indices to null if not found\n\n  if (indexDisplay < 0) indexDisplay = null;\n  if (indexId < 0) indexId = null; // markup must contain one of the mandatory placeholders\n\n  invariant(indexDisplay !== null || indexId !== null, \"The markup '\".concat(markup, \"' does not contain either of the placeholders '__id__' or '__display__'\"));\n\n  if (indexDisplay !== null && indexId !== null) {\n    // both placeholders are used, return 0 or 1 depending on the position of the requested parameter\n    return parameterName === 'id' && indexId <= indexDisplay || parameterName === 'display' && indexDisplay <= indexId ? 0 : 1;\n  } // just one placeholder is being used, we'll use the captured string for both parameters\n\n\n  return 0;\n};\n\nvar combineRegExps = function combineRegExps(regExps) {\n  var serializedRegexParser = /^\\/(.+)\\/(\\w+)?$/;\n  return new RegExp(regExps.map(function (regex) {\n    var _serializedRegexParse = serializedRegexParser.exec(regex.toString()),\n        _serializedRegexParse2 = _slicedToArray(_serializedRegexParse, 3),\n        regexString = _serializedRegexParse2[1],\n        regexFlags = _serializedRegexParse2[2];\n\n    invariant(!regexFlags, \"RegExp flags are not supported. Change /\".concat(regexString, \"/\").concat(regexFlags, \" into /\").concat(regexString, \"/\"));\n    return \"(\".concat(regexString, \")\");\n  }).join('|'), 'g');\n};\n\nvar countPlaceholders = function countPlaceholders(markup) {\n  var count = 0;\n  if (markup.indexOf('__id__') >= 0) count++;\n  if (markup.indexOf('__display__') >= 0) count++;\n  return count;\n};\n\nvar emptyFn = function emptyFn() {}; // Finds all occurrences of the markup in the value and calls the `markupIteratee` callback for each of them.\n// The optional `textIteratee` callback is called for each plain text ranges in between these markup occurrences.\n\n\nvar iterateMentionsMarkup = function iterateMentionsMarkup(value, config, markupIteratee) {\n  var textIteratee = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : emptyFn;\n  var regex = combineRegExps(config.map(function (c) {\n    return c.regex;\n  }));\n  var accOffset = 2; // first is whole match, second is the for the capturing group of first regexp component\n\n  var captureGroupOffsets = config.map(function (_ref) {\n    var markup = _ref.markup;\n    var result = accOffset; // + 1 is for the capturing group we add around each regexp component in combineRegExps\n\n    accOffset += countPlaceholders(markup) + 1;\n    return result;\n  });\n  var match;\n  var start = 0;\n  var currentPlainTextIndex = 0; // detect all mention markup occurrences in the value and iterate the matches\n\n  while ((match = regex.exec(value)) !== null) {\n    var offset = captureGroupOffsets.find(function (o) {\n      return !!match[o];\n    }); // eslint-disable-line no-loop-func\n\n    var mentionChildIndex = captureGroupOffsets.indexOf(offset);\n    var _config$mentionChildI = config[mentionChildIndex],\n        markup = _config$mentionChildI.markup,\n        displayTransform = _config$mentionChildI.displayTransform;\n    var idPos = offset + findPositionOfCapturingGroup(markup, 'id');\n    var displayPos = offset + findPositionOfCapturingGroup(markup, 'display');\n    var id = match[idPos];\n    var display = displayTransform(id, match[displayPos]);\n    var substr = value.substring(start, match.index);\n    textIteratee(substr, start, currentPlainTextIndex);\n    currentPlainTextIndex += substr.length;\n    markupIteratee(match[0], match.index, currentPlainTextIndex, id, display, mentionChildIndex, start);\n    currentPlainTextIndex += display.length;\n    start = regex.lastIndex;\n  }\n\n  if (start < value.length) {\n    textIteratee(value.substring(start), start, currentPlainTextIndex);\n  }\n};\n\nvar getPlainText = function getPlainText(value, config) {\n  var result = '';\n  iterateMentionsMarkup(value, config, function (match, index, plainTextIndex, id, display) {\n    result += display;\n  }, function (plainText) {\n    result += plainText;\n  });\n  return result;\n};\n\n// in the marked up value string.\n// If the passed character index lies inside a mention, the value of `inMarkupCorrection` defines the\n// correction to apply:\n//   - 'START' to return the index of the mention markup's first char (default)\n//   - 'END' to return the index after its last char\n//   - 'NULL' to return null\n\nvar mapPlainTextIndex = function mapPlainTextIndex(value, config, indexInPlainText) {\n  var inMarkupCorrection = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'START';\n\n  if (typeof indexInPlainText !== 'number') {\n    return indexInPlainText;\n  }\n\n  var result;\n\n  var textIteratee = function textIteratee(substr, index, substrPlainTextIndex) {\n    if (result !== undefined) return;\n\n    if (substrPlainTextIndex + substr.length >= indexInPlainText) {\n      // found the corresponding position in the current plain text range\n      result = index + indexInPlainText - substrPlainTextIndex;\n    }\n  };\n\n  var markupIteratee = function markupIteratee(markup, index, mentionPlainTextIndex, id, display, childIndex, lastMentionEndIndex) {\n    if (result !== undefined) return;\n\n    if (mentionPlainTextIndex + display.length > indexInPlainText) {\n      // found the corresponding position inside current match,\n      // return the index of the first or after the last char of the matching markup\n      // depending on whether the `inMarkupCorrection`\n      if (inMarkupCorrection === 'NULL') {\n        result = null;\n      } else {\n        result = index + (inMarkupCorrection === 'END' ? markup.length : 0);\n      }\n    }\n  };\n\n  iterateMentionsMarkup(value, config, markupIteratee, textIteratee); // when a mention is at the end of the value and we want to get the caret position\n  // at the end of the string, result is undefined\n\n  return result === undefined ? value.length : result;\n};\n\nvar spliceString = function spliceString(str, start, end, insert) {\n  return str.substring(0, start) + insert + str.substring(end);\n};\n\n// guided by the textarea text selection ranges before and after the change\n\nvar applyChangeToValue = function applyChangeToValue(value, plainTextValue, _ref, config) {\n  var selectionStartBefore = _ref.selectionStartBefore,\n      selectionEndBefore = _ref.selectionEndBefore,\n      selectionEndAfter = _ref.selectionEndAfter;\n  var oldPlainTextValue = getPlainText(value, config);\n  var lengthDelta = oldPlainTextValue.length - plainTextValue.length;\n\n  if (selectionStartBefore === 'undefined') {\n    selectionStartBefore = selectionEndAfter + lengthDelta;\n  }\n\n  if (selectionEndBefore === 'undefined') {\n    selectionEndBefore = selectionStartBefore;\n  } // Fixes an issue with replacing combined characters for complex input. Eg like acented letters on OSX\n\n\n  if (selectionStartBefore === selectionEndBefore && selectionEndBefore === selectionEndAfter && oldPlainTextValue.length === plainTextValue.length) {\n    selectionStartBefore = selectionStartBefore - 1;\n  } // extract the insertion from the new plain text value\n\n\n  var insert = plainTextValue.slice(selectionStartBefore, selectionEndAfter); // handling for Backspace key with no range selection\n\n  var spliceStart = Math.min(selectionStartBefore, selectionEndAfter);\n  var spliceEnd = selectionEndBefore;\n\n  if (selectionStartBefore === selectionEndAfter) {\n    // handling for Delete key with no range selection\n    spliceEnd = Math.max(selectionEndBefore, selectionStartBefore + lengthDelta);\n  }\n\n  var mappedSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'START');\n  var mappedSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'END');\n  var controlSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'NULL');\n  var controlSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'NULL');\n  var willRemoveMention = controlSpliceStart === null || controlSpliceEnd === null;\n  var newValue = spliceString(value, mappedSpliceStart, mappedSpliceEnd, insert);\n\n  if (!willRemoveMention) {\n    // test for auto-completion changes\n    var controlPlainTextValue = getPlainText(newValue, config);\n\n    if (controlPlainTextValue !== plainTextValue) {\n      // some auto-correction is going on\n      // find start of diff\n      spliceStart = 0;\n\n      while (plainTextValue[spliceStart] === controlPlainTextValue[spliceStart]) {\n        spliceStart++;\n      } // extract auto-corrected insertion\n\n\n      insert = plainTextValue.slice(spliceStart, selectionEndAfter); // find index of the unchanged remainder\n\n      spliceEnd = oldPlainTextValue.lastIndexOf(plainTextValue.substring(selectionEndAfter)); // re-map the corrected indices\n\n      mappedSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'START');\n      mappedSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'END');\n      newValue = spliceString(value, mappedSpliceStart, mappedSpliceEnd, insert);\n    }\n  }\n\n  return newValue;\n};\n\n// returns a the index of of the first char of the mention in the plain text.\n// If indexInPlainText does not lie inside a mention, returns indexInPlainText.\n\nvar findStartOfMentionInPlainText = function findStartOfMentionInPlainText(value, config, indexInPlainText) {\n  var result = indexInPlainText;\n  var foundMention = false;\n\n  var markupIteratee = function markupIteratee(markup, index, mentionPlainTextIndex, id, display, childIndex, lastMentionEndIndex) {\n    if (mentionPlainTextIndex <= indexInPlainText && mentionPlainTextIndex + display.length > indexInPlainText) {\n      result = mentionPlainTextIndex;\n      foundMention = true;\n    }\n  };\n\n  iterateMentionsMarkup(value, config, markupIteratee);\n\n  if (foundMention) {\n    return result;\n  }\n};\n\nvar getMentions = function getMentions(value, config) {\n  var mentions = [];\n  iterateMentionsMarkup(value, config, function (match, index, plainTextIndex, id, display, childIndex, start) {\n    mentions.push({\n      id: id,\n      display: display,\n      childIndex: childIndex,\n      index: index,\n      plainTextIndex: plainTextIndex\n    });\n  });\n  return mentions;\n};\n\nvar getSuggestionHtmlId = function getSuggestionHtmlId(prefix, id) {\n  return \"\".concat(prefix, \"-\").concat(id);\n};\n\nvar countSuggestions = function countSuggestions(suggestions) {\n  return Object.values(suggestions).reduce(function (acc, _ref) {\n    var results = _ref.results;\n    return acc + results.length;\n  }, 0);\n};\n\nvar getEndOfLastMention = function getEndOfLastMention(value, config) {\n  var mentions = getMentions(value, config);\n  var lastMention = mentions[mentions.length - 1];\n  return lastMention ? lastMention.plainTextIndex + lastMention.display.length : 0;\n};\n\nvar markupToRegex = function markupToRegex(markup) {\n  var escapedMarkup = escapeRegex(markup);\n  var charAfterDisplay = markup[markup.indexOf(PLACEHOLDERS.display) + PLACEHOLDERS.display.length];\n  var charAfterId = markup[markup.indexOf(PLACEHOLDERS.id) + PLACEHOLDERS.id.length];\n  return new RegExp(escapedMarkup.replace(PLACEHOLDERS.display, \"([^\".concat(escapeRegex(charAfterDisplay || ''), \"]+?)\")).replace(PLACEHOLDERS.id, \"([^\".concat(escapeRegex(charAfterId || ''), \"]+?)\")));\n};\n\nvar readConfigFromChildren = function readConfigFromChildren(children) {\n  return Children.toArray(children).map(function (_ref) {\n    var _ref$props = _ref.props,\n        markup = _ref$props.markup,\n        regex = _ref$props.regex,\n        displayTransform = _ref$props.displayTransform;\n    return {\n      markup: markup,\n      regex: regex ? coerceCapturingGroups(regex, markup) : markupToRegex(markup),\n      displayTransform: displayTransform || function (id, display) {\n        return display || id;\n      }\n    };\n  });\n}; // make sure that the custom regex defines the correct number of capturing groups\n\n\nvar coerceCapturingGroups = function coerceCapturingGroups(regex, markup) {\n  var numberOfGroups = new RegExp(regex.toString() + '|').exec('').length - 1;\n  var numberOfPlaceholders = countPlaceholders(markup);\n  invariant(numberOfGroups === numberOfPlaceholders, \"Number of capturing groups in RegExp \".concat(regex.toString(), \" (\").concat(numberOfGroups, \") does not match the number of placeholders in the markup '\").concat(markup, \"' (\").concat(numberOfPlaceholders, \")\"));\n  return regex;\n};\n\nvar makeMentionsMarkup = function makeMentionsMarkup(markup, id, display) {\n  return markup.replace(PLACEHOLDERS.id, id).replace(PLACEHOLDERS.display, display);\n};\n\n// This contains all the latin letters and the regex that match these letters with diacritics\n// https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript\nvar lettersDiacritics = [{\n  base: 'A',\n  letters: /(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F])/g\n}, {\n  base: 'AA',\n  letters: /(&#42802;|[\\uA732])/g\n}, {\n  base: 'AE',\n  letters: /(&#198;|&#508;|&#482;|[\\u00C6\\u01FC\\u01E2])/g\n}, {\n  base: 'AO',\n  letters: /(&#42804;|[\\uA734])/g\n}, {\n  base: 'AU',\n  letters: /(&#42806;|[\\uA736])/g\n}, {\n  base: 'AV',\n  letters: /(&#42808;|&#42810;|[\\uA738\\uA73A])/g\n}, {\n  base: 'AY',\n  letters: /(&#42812;|[\\uA73C])/g\n}, {\n  base: 'B',\n  letters: /(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181])/g\n}, {\n  base: 'C',\n  letters: /(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E])/g\n}, {\n  base: 'D',\n  letters: /(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779\\u00D0])/g\n}, {\n  base: 'DZ',\n  letters: /(&#497;|&#452;|[\\u01F1\\u01C4])/g\n}, {\n  base: 'Dz',\n  letters: /(&#498;|&#453;|[\\u01F2\\u01C5])/g\n}, {\n  base: 'E',\n  letters: /(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E])/g\n}, {\n  base: 'F',\n  letters: /(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B])/g\n}, {\n  base: 'G',\n  letters: /(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E])/g\n}, {\n  base: 'H',\n  letters: /(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D])/g\n}, {\n  base: 'I',\n  letters: /(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197])/g\n}, {\n  base: 'J',\n  letters: /(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\\u004A\\u24BF\\uFF2A\\u0134\\u0248])/g\n}, {\n  base: 'K',\n  letters: /(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2])/g\n}, {\n  base: 'L',\n  letters: /(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780])/g\n}, {\n  base: 'LJ',\n  letters: /(&#455;|[\\u01C7])/g\n}, {\n  base: 'Lj',\n  letters: /(&#456;|[\\u01C8])/g\n}, {\n  base: 'M',\n  letters: /(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C])/g\n}, {\n  base: 'N',\n  letters: /(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4\\u014A])/g\n}, {\n  base: 'NJ',\n  letters: /(&#458;|[\\u01CA])/g\n}, {\n  base: 'Nj',\n  letters: /(&#459;|[\\u01CB])/g\n}, {\n  base: 'O',\n  letters: /(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C])/g\n}, {\n  base: 'OE',\n  letters: /(&#338;|[\\u0152])/g\n}, {\n  base: 'OI',\n  letters: /(&#418;|[\\u01A2])/g\n}, {\n  base: 'OO',\n  letters: /(&#42830;|[\\uA74E])/g\n}, {\n  base: 'OU',\n  letters: /(&#546;|[\\u0222])/g\n}, {\n  base: 'P',\n  letters: /(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754])/g\n}, {\n  base: 'Q',\n  letters: /(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A])/g\n}, {\n  base: 'R',\n  letters: /(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782])/g\n}, {\n  base: 'S',\n  letters: /(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784])/g\n}, {\n  base: 'T',\n  letters: /(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786])/g\n}, {\n  base: 'TH',\n  letters: /(&#222;|[\\u00DE])/g\n}, {\n  base: 'TZ',\n  letters: /(&#42792;|[\\uA728])/g\n}, {\n  base: 'U',\n  letters: /(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244])/g\n}, {\n  base: 'V',\n  letters: /(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245])/g\n}, {\n  base: 'VY',\n  letters: /(&#42848;|[\\uA760])/g\n}, {\n  base: 'W',\n  letters: /(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72])/g\n}, {\n  base: 'X',\n  letters: /(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C])/g\n}, {\n  base: 'Y',\n  letters: /(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE])/g\n}, {\n  base: 'Z',\n  letters: /(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762])/g\n}, {\n  base: 'a',\n  letters: /(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250])/g\n}, {\n  base: 'aa',\n  letters: /(&#42803;|[\\uA733])/g\n}, {\n  base: 'ae',\n  letters: /(&#230;|&#509;|&#483;|[\\u00E6\\u01FD\\u01E3])/g\n}, {\n  base: 'ao',\n  letters: /(&#42805;|[\\uA735])/g\n}, {\n  base: 'au',\n  letters: /(&#42807;|[\\uA737])/g\n}, {\n  base: 'av',\n  letters: /(&#42809;|&#42811;|[\\uA739\\uA73B])/g\n}, {\n  base: 'ay',\n  letters: /(&#42813;|[\\uA73D])/g\n}, {\n  base: 'b',\n  letters: /(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253])/g\n}, {\n  base: 'c',\n  letters: /(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184])/g\n}, {\n  base: 'd',\n  letters: /(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A\\u00F0])/g\n}, {\n  base: 'dz',\n  letters: /(&#499;|&#454;|[\\u01F3\\u01C6])/g\n}, {\n  base: 'e',\n  letters: /(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD])/g\n}, {\n  base: 'f',\n  letters: /(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C])/g\n}, {\n  base: 'g',\n  letters: /(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F])/g\n}, {\n  base: 'h',\n  letters: /(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265])/g\n}, {\n  base: 'hv',\n  letters: /(&#405;|[\\u0195])/g\n}, {\n  base: 'i',\n  letters: /(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131])/g\n}, {\n  base: 'ij',\n  letters: /(&#307;|[\\u0133])/g\n}, {\n  base: 'j',\n  letters: /(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249])/g\n}, {\n  base: 'k',\n  letters: /(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3])/g\n}, {\n  base: 'l',\n  letters: /(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747])/g\n}, {\n  base: 'lj',\n  letters: /(&#457;|[\\u01C9])/g\n}, {\n  base: 'm',\n  letters: /(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F])/g\n}, {\n  base: 'n',\n  letters: /(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5\\u014B])/g\n}, {\n  base: 'nj',\n  letters: /(&#460;|[\\u01CC])/g\n}, {\n  base: 'o',\n  letters: /(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275])/g\n}, {\n  base: 'oe',\n  letters: /(&#339;|[\\u0153])/g\n}, {\n  base: 'oi',\n  letters: /(&#419;|[\\u01A3])/g\n}, {\n  base: 'ou',\n  letters: /(&#547;|[\\u0223])/g\n}, {\n  base: 'oo',\n  letters: /(&#42831;|[\\uA74F])/g\n}, {\n  base: 'p',\n  letters: /(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755])/g\n}, {\n  base: 'q',\n  letters: /(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759])/g\n}, {\n  base: 'r',\n  letters: /(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783])/g\n}, {\n  base: 's',\n  letters: /(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\\u0073\\u24E2\\uFF53\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B\\u017F])/g\n}, {\n  base: 'ss',\n  letters: /(&#223;|[\\u00DF])/g\n}, {\n  base: 't',\n  letters: /(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787])/g\n}, {\n  base: 'th',\n  letters: /(&#254;|[\\u00FE])/g\n}, {\n  base: 'tz',\n  letters: /(&#42793;|[\\uA729])/g\n}, {\n  base: 'u',\n  letters: /(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289])/g\n}, {\n  base: 'v',\n  letters: /(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C])/g\n}, {\n  base: 'vy',\n  letters: /(&#42849;|[\\uA761])/g\n}, {\n  base: 'w',\n  letters: /(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73])/g\n}, {\n  base: 'x',\n  letters: /(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D])/g\n}, {\n  base: 'y',\n  letters: /(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF])/g\n}, {\n  base: 'z',\n  letters: /(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763])/g\n}];\n\nvar removeAccents = function removeAccents(str) {\n  var formattedStr = str;\n  lettersDiacritics.forEach(function (letterDiacritics) {\n    formattedStr = formattedStr.replace(letterDiacritics.letters, letterDiacritics.base);\n  });\n  return formattedStr;\n};\n\nvar normalizeString = function normalizeString(str) {\n  return removeAccents(str).toLowerCase();\n};\n\nvar getSubstringIndex = function getSubstringIndex(str, substr, ignoreAccents) {\n  if (!ignoreAccents) {\n    return str.toLowerCase().indexOf(substr.toLowerCase());\n  }\n\n  return normalizeString(str).indexOf(normalizeString(substr));\n};\n\nvar isIE = function isIE() {\n  return !!document.documentMode;\n};\n\nvar isNumber = function isNumber(val) {\n  return typeof val === 'number';\n};\n\nvar keys = function keys(obj) {\n  return obj === Object(obj) ? Object.keys(obj) : [];\n};\n\nvar omit = function omit(obj) {\n  var _ref;\n\n  for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    rest[_key - 1] = arguments[_key];\n  }\n\n  var keys = (_ref = []).concat.apply(_ref, rest);\n\n  return Object.keys(obj).reduce(function (acc, k) {\n    if (obj.hasOwnProperty(k) && !keys.includes(k) && obj[k] !== undefined) {\n      acc[k] = obj[k];\n    }\n\n    return acc;\n  }, {});\n};\n\nvar _excluded = [\"style\", \"className\", \"classNames\"];\n\nfunction createDefaultStyle(defaultStyle, getModifiers) {\n  var enhance = function enhance(ComponentToWrap) {\n    var DefaultStyleEnhancer = function DefaultStyleEnhancer(_ref) {\n      var style = _ref.style,\n          className = _ref.className,\n          classNames = _ref.classNames,\n          rest = _objectWithoutProperties(_ref, _excluded);\n\n      var modifiers = getModifiers ? getModifiers(rest) : undefined;\n      var styles = useStyles(defaultStyle, {\n        style: style,\n        className: className,\n        classNames: classNames\n      }, modifiers);\n      return /*#__PURE__*/React.createElement(ComponentToWrap, _extends({}, rest, {\n        style: styles\n      }));\n    };\n\n    var displayName = ComponentToWrap.displayName || ComponentToWrap.name || 'Component';\n    DefaultStyleEnhancer.displayName = \"defaultStyle(\".concat(displayName, \")\");\n    return DefaultStyleEnhancer;\n  };\n\n  return enhance;\n}\n\nvar _generateComponentKey = function _generateComponentKey(usedKeys, id) {\n  if (!usedKeys.hasOwnProperty(id)) {\n    usedKeys[id] = 0;\n  } else {\n    usedKeys[id]++;\n  }\n\n  return id + '_' + usedKeys[id];\n};\n\nfunction Highlighter(_ref) {\n  var selectionStart = _ref.selectionStart,\n      selectionEnd = _ref.selectionEnd,\n      _ref$value = _ref.value,\n      value = _ref$value === void 0 ? '' : _ref$value,\n      onCaretPositionChange = _ref.onCaretPositionChange,\n      containerRef = _ref.containerRef,\n      children = _ref.children,\n      singleLine = _ref.singleLine,\n      style = _ref.style;\n\n  var _useState = useState({\n    left: undefined,\n    top: undefined\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      position = _useState2[0],\n      setPosition = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      caretElement = _useState4[0],\n      setCaretElement = _useState4[1];\n\n  useEffect(function () {\n    notifyCaretPosition();\n  }, [caretElement]);\n\n  var notifyCaretPosition = function notifyCaretPosition() {\n    if (!caretElement) {\n      return;\n    }\n\n    var offsetLeft = caretElement.offsetLeft,\n        offsetTop = caretElement.offsetTop;\n\n    if (position.left === offsetLeft && position.top === offsetTop) {\n      return;\n    }\n\n    var newPosition = {\n      left: offsetLeft,\n      top: offsetTop\n    };\n    setPosition(newPosition);\n    onCaretPositionChange(newPosition);\n  };\n\n  var config = readConfigFromChildren(children);\n  var caretPositionInMarkup;\n\n  if (selectionEnd === selectionStart) {\n    caretPositionInMarkup = mapPlainTextIndex(value, config, selectionStart, 'START');\n  }\n\n  var resultComponents = [];\n  var componentKeys = {};\n  var components = resultComponents;\n  var substringComponentKey = 0;\n\n  var textIteratee = function textIteratee(substr, index, indexInPlainText) {\n    // check whether the caret element has to be inserted inside the current plain substring\n    if (isNumber(caretPositionInMarkup) && caretPositionInMarkup >= index && caretPositionInMarkup <= index + substr.length) {\n      // if yes, split substr at the caret position and insert the caret component\n      var splitIndex = caretPositionInMarkup - index;\n      components.push(renderSubstring(substr.substring(0, splitIndex), substringComponentKey)); // add all following substrings and mention components as children of the caret component\n\n      components = [renderSubstring(substr.substring(splitIndex), substringComponentKey)];\n    } else {\n      components.push(renderSubstring(substr, substringComponentKey));\n    }\n\n    substringComponentKey++;\n  };\n\n  var mentionIteratee = function mentionIteratee(markup, index, indexInPlainText, id, display, mentionChildIndex, lastMentionEndIndex) {\n    var key = _generateComponentKey(componentKeys, id);\n\n    components.push(getMentionComponentForMatch(id, display, mentionChildIndex, key));\n  };\n\n  var renderSubstring = function renderSubstring(string, key) {\n    // set substring span to hidden, so that Emojis are not shown double in Mobile Safari\n    return /*#__PURE__*/React.createElement(\"span\", _extends({}, style('substring'), {\n      key: key\n    }), string);\n  };\n\n  var getMentionComponentForMatch = function getMentionComponentForMatch(id, display, mentionChildIndex, key) {\n    var props = {\n      id: id,\n      display: display,\n      key: key\n    };\n    var child = Children.toArray(children)[mentionChildIndex];\n    return /*#__PURE__*/React.cloneElement(child, props);\n  };\n\n  var renderHighlighterCaret = function renderHighlighterCaret(children) {\n    return /*#__PURE__*/React.createElement(\"span\", _extends({}, style('caret'), {\n      ref: setCaretElement,\n      key: \"caret\"\n    }), children);\n  };\n\n  iterateMentionsMarkup(value, config, mentionIteratee, textIteratee); // append a span containing a space, to ensure the last text line has the correct height\n\n  components.push(' ');\n\n  if (components !== resultComponents) {\n    // if a caret component is to be rendered, add all components that followed as its children\n    resultComponents.push(renderHighlighterCaret(components));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, style, {\n    ref: containerRef\n  }), resultComponents);\n}\n\nHighlighter.propTypes = {\n  selectionStart: PropTypes.number,\n  selectionEnd: PropTypes.number,\n  value: PropTypes.string.isRequired,\n  onCaretPositionChange: PropTypes.func.isRequired,\n  containerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\n  })]),\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element)]).isRequired\n};\nvar styled = createDefaultStyle({\n  position: 'relative',\n  boxSizing: 'border-box',\n  width: '100%',\n  color: 'transparent',\n  overflow: 'hidden',\n  whiteSpace: 'pre-wrap',\n  wordWrap: 'break-word',\n  border: '1px solid transparent',\n  textAlign: 'start',\n  '&singleLine': {\n    whiteSpace: 'pre',\n    wordWrap: null\n  },\n  substring: {\n    visibility: 'hidden'\n  }\n}, function (props) {\n  return {\n    '&singleLine': props.singleLine\n  };\n});\nvar Highlighter$1 = styled(Highlighter);\n\nfunction Suggestion(_ref) {\n  var id = _ref.id,\n      focused = _ref.focused,\n      ignoreAccents = _ref.ignoreAccents,\n      index = _ref.index,\n      onClick = _ref.onClick,\n      onMouseEnter = _ref.onMouseEnter,\n      query = _ref.query,\n      renderSuggestion = _ref.renderSuggestion,\n      suggestion = _ref.suggestion,\n      style = _ref.style,\n      className = _ref.className,\n      classNames = _ref.classNames;\n  var rest = {\n    onClick: onClick,\n    onMouseEnter: onMouseEnter\n  };\n\n  var renderContent = function renderContent() {\n    var display = getDisplay();\n    var highlightedDisplay = renderHighlightedDisplay(display);\n\n    if (renderSuggestion) {\n      return renderSuggestion(suggestion, query, highlightedDisplay, index, focused);\n    }\n\n    return highlightedDisplay;\n  };\n\n  var getDisplay = function getDisplay() {\n    if (typeof suggestion === 'string') {\n      return suggestion;\n    }\n\n    var id = suggestion.id,\n        display = suggestion.display;\n\n    if (id === undefined || !display) {\n      return id;\n    }\n\n    return display;\n  };\n\n  var renderHighlightedDisplay = function renderHighlightedDisplay(display) {\n    var i = getSubstringIndex(display, query, ignoreAccents);\n\n    if (i === -1) {\n      return /*#__PURE__*/React.createElement(\"span\", style('display'), display);\n    }\n\n    return /*#__PURE__*/React.createElement(\"span\", style('display'), display.substring(0, i), /*#__PURE__*/React.createElement(\"b\", style('highlight'), display.substring(i, i + query.length)), display.substring(i + query.length));\n  };\n\n  return /*#__PURE__*/React.createElement(\"li\", _extends({\n    id: id,\n    role: \"option\",\n    \"aria-selected\": focused\n  }, rest, style), renderContent());\n}\n\nSuggestion.propTypes = {\n  id: PropTypes.string.isRequired,\n  query: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  ignoreAccents: PropTypes.bool,\n  suggestion: PropTypes.oneOfType([PropTypes.string, PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    display: PropTypes.string\n  })]).isRequired,\n  renderSuggestion: PropTypes.func,\n  focused: PropTypes.bool\n};\nvar styled$1 = createDefaultStyle({\n  cursor: 'pointer'\n}, function (props) {\n  return {\n    '&focused': props.focused\n  };\n});\nvar Suggestion$1 = styled$1(Suggestion);\n\nfunction LoadingIndicator(_ref) {\n  var style = _ref.style,\n      className = _ref.className,\n      classNames = _ref.classNames;\n  var styles = useStyles(defaultstyle, {\n    style: style,\n    className: className,\n    classNames: classNames\n  });\n  var spinnerStyles = styles('spinner');\n  return /*#__PURE__*/React.createElement(\"div\", styles, /*#__PURE__*/React.createElement(\"div\", spinnerStyles, /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element1'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element2'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element3'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element4'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element5']))));\n}\n\nvar defaultstyle = {};\n\nfunction SuggestionsOverlay(_ref) {\n  var id = _ref.id,\n      _ref$suggestions = _ref.suggestions,\n      suggestions = _ref$suggestions === void 0 ? {} : _ref$suggestions,\n      a11ySuggestionsListLabel = _ref.a11ySuggestionsListLabel,\n      focusIndex = _ref.focusIndex,\n      position = _ref.position,\n      left = _ref.left,\n      right = _ref.right,\n      top = _ref.top,\n      scrollFocusedIntoView = _ref.scrollFocusedIntoView,\n      isLoading = _ref.isLoading,\n      isOpened = _ref.isOpened,\n      _ref$onSelect = _ref.onSelect,\n      onSelect = _ref$onSelect === void 0 ? function () {\n    return null;\n  } : _ref$onSelect,\n      ignoreAccents = _ref.ignoreAccents,\n      containerRef = _ref.containerRef,\n      children = _ref.children,\n      style = _ref.style,\n      customSuggestionsContainer = _ref.customSuggestionsContainer,\n      onMouseDown = _ref.onMouseDown,\n      onMouseEnter = _ref.onMouseEnter;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      ulElement = _useState2[0],\n      setUlElement = _useState2[1];\n\n  useEffect(function () {\n    if (!ulElement || ulElement.offsetHeight >= ulElement.scrollHeight || !scrollFocusedIntoView) {\n      return;\n    }\n\n    var scrollTop = ulElement.scrollTop;\n\n    var _ulElement$children$f = ulElement.children[focusIndex].getBoundingClientRect(),\n        top = _ulElement$children$f.top,\n        bottom = _ulElement$children$f.bottom;\n\n    var _ulElement$getBoundin = ulElement.getBoundingClientRect(),\n        topContainer = _ulElement$getBoundin.top;\n\n    top = top - topContainer + scrollTop;\n    bottom = bottom - topContainer + scrollTop;\n\n    if (top < scrollTop) {\n      ulElement.scrollTop = top;\n    } else if (bottom > ulElement.offsetHeight) {\n      ulElement.scrollTop = bottom - ulElement.offsetHeight;\n    }\n  }, []);\n\n  var renderSuggestions = function renderSuggestions() {\n    var suggestionsToRender = Object.values(suggestions).reduce(function (accResults, _ref2) {\n      var results = _ref2.results,\n          queryInfo = _ref2.queryInfo;\n      return [].concat(_toConsumableArray(accResults), _toConsumableArray(results.map(function (result, index) {\n        return renderSuggestion(result, queryInfo, accResults.length + index);\n      })));\n    }, []);\n    if (customSuggestionsContainer) return customSuggestionsContainer(suggestionsToRender);else return suggestionsToRender;\n  };\n\n  var renderSuggestion = function renderSuggestion(result, queryInfo, index) {\n    var isFocused = index === focusIndex;\n    var childIndex = queryInfo.childIndex,\n        query = queryInfo.query;\n    var renderSuggestion = Children.toArray(children)[childIndex].props.renderSuggestion;\n    return /*#__PURE__*/React.createElement(Suggestion$1, {\n      style: style('item'),\n      key: \"\".concat(childIndex, \"-\").concat(getID(result)),\n      id: getSuggestionHtmlId(id, index),\n      query: query,\n      index: index,\n      ignoreAccents: ignoreAccents,\n      renderSuggestion: renderSuggestion,\n      suggestion: result,\n      focused: isFocused,\n      onClick: function onClick() {\n        return select(result, queryInfo);\n      },\n      onMouseEnter: function onMouseEnter() {\n        return handleMouseEnter(index);\n      }\n    });\n  };\n\n  var renderLoadingIndicator = function renderLoadingIndicator() {\n    if (!isLoading) {\n      return;\n    }\n\n    return /*#__PURE__*/React.createElement(LoadingIndicator, {\n      style: style('loadingIndicator')\n    });\n  };\n\n  var handleMouseEnter = function handleMouseEnter(index, ev) {\n    if (onMouseEnter) {\n      onMouseEnter(index);\n    }\n  };\n\n  var select = function select(suggestion, queryInfo) {\n    onSelect(suggestion, queryInfo);\n  };\n\n  var getID = function getID(suggestion) {\n    if (typeof suggestion === 'string') {\n      return suggestion;\n    }\n\n    return suggestion.id;\n  };\n\n  if (!isOpened) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, inline({\n    position: position || 'absolute',\n    left: left,\n    right: right,\n    top: top\n  }, style), {\n    onMouseDown: onMouseDown,\n    ref: containerRef\n  }), /*#__PURE__*/React.createElement(\"ul\", _extends({\n    ref: setUlElement,\n    id: id,\n    role: \"listbox\",\n    \"aria-label\": a11ySuggestionsListLabel\n  }, style('list')), renderSuggestions()), renderLoadingIndicator());\n}\n\nSuggestionsOverlay.propTypes = {\n  id: PropTypes.string.isRequired,\n  suggestions: PropTypes.object.isRequired,\n  a11ySuggestionsListLabel: PropTypes.string,\n  focusIndex: PropTypes.number,\n  position: PropTypes.string,\n  left: PropTypes.number,\n  right: PropTypes.number,\n  top: PropTypes.number,\n  scrollFocusedIntoView: PropTypes.bool,\n  isLoading: PropTypes.bool,\n  isOpened: PropTypes.bool.isRequired,\n  onSelect: PropTypes.func,\n  ignoreAccents: PropTypes.bool,\n  customSuggestionsContainer: PropTypes.any,\n  containerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\n  })])\n};\nvar styled$2 = createDefaultStyle({\n  zIndex: 1,\n  backgroundColor: 'white',\n  marginTop: 14,\n  minWidth: 100,\n  list: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none'\n  }\n});\nvar SuggestionsOverlay$1 = styled$2(SuggestionsOverlay);\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar makeTriggerRegex = function makeTriggerRegex(trigger) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (trigger instanceof RegExp) {\n    return trigger;\n  } else {\n    var allowSpaceInQuery = options.allowSpaceInQuery;\n    var escapedTriggerChar = escapeRegex(trigger); // first capture group is the part to be replaced on completion\n    // second capture group is for extracting the search query\n\n    return new RegExp(\"(?:^|\\\\s)(\".concat(escapedTriggerChar, \"([^\").concat(allowSpaceInQuery ? '' : '\\\\s').concat(escapedTriggerChar, \"]*))$\"));\n  }\n};\n\nvar getDataProvider = function getDataProvider(data, ignoreAccents) {\n  if (data instanceof Array) {\n    // if data is an array, create a function to query that\n    return function (query, callback) {\n      var results = [];\n\n      for (var i = 0, l = data.length; i < l; ++i) {\n        var display = data[i].display || data[i].id;\n\n        if (getSubstringIndex(display, query, ignoreAccents) >= 0) {\n          results.push(data[i]);\n        }\n      }\n\n      return results;\n    };\n  } else {\n    // expect data to be a query function\n    return data;\n  }\n};\n\nvar KEY = {\n  TAB: 9,\n  RETURN: 13,\n  ESC: 27,\n  UP: 38,\n  DOWN: 40\n};\nvar isComposing = false;\nvar propTypes = {\n  /**\n   * If set to `true` a regular text input element will be rendered\n   * instead of a textarea\n   */\n  singleLine: PropTypes.bool,\n  allowSpaceInQuery: PropTypes.bool,\n  allowSuggestionsAboveCursor: PropTypes.bool,\n  forceSuggestionsAboveCursor: PropTypes.bool,\n  ignoreAccents: PropTypes.bool,\n  a11ySuggestionsListLabel: PropTypes.string,\n  value: PropTypes.string,\n  onKeyDown: PropTypes.func,\n  customSuggestionsContainer: PropTypes.func,\n  onSelect: PropTypes.func,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  suggestionsPortalHost: typeof Element === 'undefined' ? PropTypes.any : PropTypes.PropTypes.instanceOf(Element),\n  inputRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\n  })]),\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element)]).isRequired\n};\n\nvar MentionsInput = /*#__PURE__*/function (_React$Component) {\n  _inherits(MentionsInput, _React$Component);\n\n  var _super = _createSuper(MentionsInput);\n\n  function MentionsInput(_props) {\n    var _this;\n\n    _classCallCheck(this, MentionsInput);\n\n    _this = _super.call(this, _props);\n\n    _defineProperty(_assertThisInitialized(_this), \"setContainerElement\", function (el) {\n      _this.containerElement = el;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getInputProps\", function () {\n      var _this$props = _this.props,\n          readOnly = _this$props.readOnly,\n          disabled = _this$props.disabled,\n          style = _this$props.style; // pass all props that neither we, nor substyle, consume through to the input control\n\n      var props = omit(_this.props, ['style', 'classNames', 'className'], // substyle props\n      keys(propTypes));\n      return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, props), style('input')), {}, {\n        value: _this.getPlainText(),\n        onScroll: _this.updateHighlighterScroll\n      }, !readOnly && !disabled && {\n        onChange: _this.handleChange,\n        onSelect: _this.handleSelect,\n        onKeyDown: _this.handleKeyDown,\n        onBlur: _this.handleBlur,\n        onCompositionStart: _this.handleCompositionStart,\n        onCompositionEnd: _this.handleCompositionEnd\n      }), _this.isOpened() && {\n        role: 'combobox',\n        'aria-controls': _this.uuidSuggestionsOverlay,\n        'aria-expanded': true,\n        'aria-autocomplete': 'list',\n        'aria-haspopup': 'listbox',\n        'aria-activedescendant': getSuggestionHtmlId(_this.uuidSuggestionsOverlay, _this.state.focusIndex)\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderControl\", function () {\n      var _this$props2 = _this.props,\n          singleLine = _this$props2.singleLine,\n          style = _this$props2.style;\n\n      var inputProps = _this.getInputProps();\n\n      return /*#__PURE__*/React.createElement(\"div\", style('control'), _this.renderHighlighter(), singleLine ? _this.renderInput(inputProps) : _this.renderTextarea(inputProps));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderInput\", function (props) {\n      return /*#__PURE__*/React.createElement(\"input\", _extends({\n        type: \"text\",\n        ref: _this.setInputRef\n      }, props));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderTextarea\", function (props) {\n      return /*#__PURE__*/React.createElement(\"textarea\", _extends({\n        ref: _this.setInputRef\n      }, props));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setInputRef\", function (el) {\n      _this.inputElement = el;\n      var inputRef = _this.props.inputRef;\n\n      if (typeof inputRef === 'function') {\n        inputRef(el);\n      } else if (inputRef) {\n        inputRef.current = el;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setSuggestionsElement\", function (el) {\n      _this.suggestionsElement = el;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSuggestionsOverlay\", function () {\n      if (!isNumber(_this.state.selectionStart)) {\n        // do not show suggestions when the input does not have the focus\n        return null;\n      }\n\n      var _this$state$suggestio = _this.state.suggestionsPosition,\n          position = _this$state$suggestio.position,\n          left = _this$state$suggestio.left,\n          top = _this$state$suggestio.top,\n          right = _this$state$suggestio.right;\n      var suggestionsNode = /*#__PURE__*/React.createElement(SuggestionsOverlay$1, {\n        id: _this.uuidSuggestionsOverlay,\n        style: _this.props.style('suggestions'),\n        position: position,\n        left: left,\n        top: top,\n        right: right,\n        focusIndex: _this.state.focusIndex,\n        scrollFocusedIntoView: _this.state.scrollFocusedIntoView,\n        containerRef: _this.setSuggestionsElement,\n        suggestions: _this.state.suggestions,\n        customSuggestionsContainer: _this.props.customSuggestionsContainer,\n        onSelect: _this.addMention,\n        onMouseDown: _this.handleSuggestionsMouseDown,\n        onMouseEnter: _this.handleSuggestionsMouseEnter,\n        isLoading: _this.isLoading(),\n        isOpened: _this.isOpened(),\n        ignoreAccents: _this.props.ignoreAccents,\n        a11ySuggestionsListLabel: _this.props.a11ySuggestionsListLabel\n      }, _this.props.children);\n\n      if (_this.props.suggestionsPortalHost) {\n        return /*#__PURE__*/ReactDOM.createPortal(suggestionsNode, _this.props.suggestionsPortalHost);\n      } else {\n        return suggestionsNode;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderHighlighter\", function () {\n      var _this$state = _this.state,\n          selectionStart = _this$state.selectionStart,\n          selectionEnd = _this$state.selectionEnd;\n      var _this$props3 = _this.props,\n          singleLine = _this$props3.singleLine,\n          children = _this$props3.children,\n          value = _this$props3.value,\n          style = _this$props3.style;\n      return /*#__PURE__*/React.createElement(Highlighter$1, {\n        containerRef: _this.setHighlighterElement,\n        style: style('highlighter'),\n        value: value,\n        singleLine: singleLine,\n        selectionStart: selectionStart,\n        selectionEnd: selectionEnd,\n        onCaretPositionChange: _this.handleCaretPositionChange\n      }, children);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setHighlighterElement\", function (el) {\n      _this.highlighterElement = el;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCaretPositionChange\", function (position) {\n      _this.setState({\n        caretPosition: position\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getPlainText\", function () {\n      return getPlainText(_this.props.value || '', readConfigFromChildren(_this.props.children));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"executeOnChange\", function (event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (_this.props.onChange) {\n        var _this$props4;\n\n        return (_this$props4 = _this.props).onChange.apply(_this$props4, [event].concat(args));\n      }\n\n      if (_this.props.valueLink) {\n        var _this$props$valueLink;\n\n        return (_this$props$valueLink = _this.props.valueLink).requestChange.apply(_this$props$valueLink, [event.target.value].concat(args));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (ev) {\n      isComposing = false;\n\n      if (isIE()) {\n        // if we are inside iframe, we need to find activeElement within its contentDocument\n        var currentDocument = document.activeElement && document.activeElement.contentDocument || document;\n\n        if (currentDocument.activeElement !== ev.target) {\n          // fix an IE bug (blur from empty input element with placeholder attribute trigger \"input\" event)\n          return;\n        }\n      }\n\n      var value = _this.props.value || '';\n      var config = readConfigFromChildren(_this.props.children);\n      var newPlainTextValue = ev.target.value; // Derive the new value to set by applying the local change in the textarea's plain text\n\n      var newValue = applyChangeToValue(value, newPlainTextValue, {\n        selectionStartBefore: _this.state.selectionStart,\n        selectionEndBefore: _this.state.selectionEnd,\n        selectionEndAfter: ev.target.selectionEnd\n      }, config); // In case a mention is deleted, also adjust the new plain text value\n\n      newPlainTextValue = getPlainText(newValue, config); // Save current selection after change to be able to restore caret position after rerendering\n\n      var selectionStart = ev.target.selectionStart;\n      var selectionEnd = ev.target.selectionEnd;\n      var setSelectionAfterMentionChange = false; // Adjust selection range in case a mention will be deleted by the characters outside of the\n      // selection range that are automatically deleted\n\n      var startOfMention = findStartOfMentionInPlainText(value, config, selectionStart);\n\n      if (startOfMention !== undefined && _this.state.selectionEnd > startOfMention) {\n        // only if a deletion has taken place\n        selectionStart = startOfMention + (ev.nativeEvent.data ? ev.nativeEvent.data.length : 0);\n        selectionEnd = selectionStart;\n        setSelectionAfterMentionChange = true;\n      }\n\n      _this.setState({\n        selectionStart: selectionStart,\n        selectionEnd: selectionEnd,\n        setSelectionAfterMentionChange: setSelectionAfterMentionChange\n      });\n\n      var mentions = getMentions(newValue, config); // Propagate change\n      // let handleChange = this.getOnChange(this.props) || emptyFunction;\n\n      var eventMock = {\n        target: {\n          value: newValue\n        }\n      }; // this.props.onChange.call(this, eventMock, newValue, newPlainTextValue, mentions);\n\n      _this.executeOnChange(eventMock, newValue, newPlainTextValue, mentions);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSelect\", function (ev) {\n      // keep track of selection range / caret position\n      _this.setState({\n        selectionStart: ev.target.selectionStart,\n        selectionEnd: ev.target.selectionEnd\n      }); // do nothing while a IME composition session is active\n\n\n      if (isComposing) return; // refresh suggestions queries\n\n      var el = _this.inputElement;\n\n      if (ev.target.selectionStart === ev.target.selectionEnd) {\n        _this.updateMentionsQueries(el.value, ev.target.selectionStart);\n      } else {\n        _this.clearSuggestions();\n      } // sync highlighters scroll position\n\n\n      _this.updateHighlighterScroll();\n\n      _this.props.onSelect(ev);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleKeyDown\", function (ev) {\n      // do not intercept key events if the suggestions overlay is not shown\n      var suggestionsCount = countSuggestions(_this.state.suggestions);\n\n      if (suggestionsCount === 0 || !_this.suggestionsElement) {\n        _this.props.onKeyDown(ev);\n\n        return;\n      }\n\n      if (Object.values(KEY).indexOf(ev.keyCode) >= 0) {\n        ev.preventDefault();\n        ev.stopPropagation();\n      }\n\n      switch (ev.keyCode) {\n        case KEY.ESC:\n          {\n            _this.clearSuggestions();\n\n            return;\n          }\n\n        case KEY.DOWN:\n          {\n            _this.shiftFocus(+1);\n\n            return;\n          }\n\n        case KEY.UP:\n          {\n            _this.shiftFocus(-1);\n\n            return;\n          }\n\n        case KEY.RETURN:\n          {\n            _this.selectFocused();\n\n            return;\n          }\n\n        case KEY.TAB:\n          {\n            _this.selectFocused();\n\n            return;\n          }\n\n        default:\n          {\n            return;\n          }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"shiftFocus\", function (delta) {\n      var suggestionsCount = countSuggestions(_this.state.suggestions);\n\n      _this.setState({\n        focusIndex: (suggestionsCount + _this.state.focusIndex + delta) % suggestionsCount,\n        scrollFocusedIntoView: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectFocused\", function () {\n      var _this$state2 = _this.state,\n          suggestions = _this$state2.suggestions,\n          focusIndex = _this$state2.focusIndex;\n      var _Object$values$reduce = Object.values(suggestions).reduce(function (acc, _ref) {\n        var results = _ref.results,\n            queryInfo = _ref.queryInfo;\n        return [].concat(_toConsumableArray(acc), _toConsumableArray(results.map(function (result) {\n          return {\n            result: result,\n            queryInfo: queryInfo\n          };\n        })));\n      }, [])[focusIndex],\n          result = _Object$values$reduce.result,\n          queryInfo = _Object$values$reduce.queryInfo;\n\n      _this.addMention(result, queryInfo);\n\n      _this.setState({\n        focusIndex: 0\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBlur\", function (ev) {\n      var clickedSuggestion = _this._suggestionsMouseDown;\n      _this._suggestionsMouseDown = false; // only reset selection if the mousedown happened on an element\n      // other than the suggestions overlay\n\n      if (!clickedSuggestion) {\n        _this.setState({\n          selectionStart: null,\n          selectionEnd: null\n        });\n      }\n\n      window.setTimeout(function () {\n        _this.updateHighlighterScroll();\n      }, 1);\n\n      _this.props.onBlur(ev, clickedSuggestion);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSuggestionsMouseDown\", function (ev) {\n      _this._suggestionsMouseDown = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSuggestionsMouseEnter\", function (focusIndex) {\n      _this.setState({\n        focusIndex: focusIndex,\n        scrollFocusedIntoView: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateSuggestionsPosition\", function () {\n      var caretPosition = _this.state.caretPosition;\n      var _this$props5 = _this.props,\n          suggestionsPortalHost = _this$props5.suggestionsPortalHost,\n          allowSuggestionsAboveCursor = _this$props5.allowSuggestionsAboveCursor,\n          forceSuggestionsAboveCursor = _this$props5.forceSuggestionsAboveCursor;\n\n      if (!caretPosition || !_this.suggestionsElement) {\n        return;\n      }\n\n      var suggestions = _this.suggestionsElement;\n      var highlighter = _this.highlighterElement; // first get viewport-relative position (highlighter is offsetParent of caret):\n\n      var caretOffsetParentRect = highlighter.getBoundingClientRect();\n      var caretHeight = getComputedStyleLengthProp(highlighter, 'font-size');\n      var viewportRelative = {\n        left: caretOffsetParentRect.left + caretPosition.left,\n        top: caretOffsetParentRect.top + caretPosition.top + caretHeight\n      };\n      var viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\n      if (!suggestions) {\n        return;\n      }\n\n      var position = {}; // if suggestions menu is in a portal, update position to be releative to its portal node\n\n      if (suggestionsPortalHost) {\n        position.position = 'fixed';\n        var left = viewportRelative.left;\n        var top = viewportRelative.top; // absolute/fixed positioned elements are positioned according to their entire box including margins; so we remove margins here:\n\n        left -= getComputedStyleLengthProp(suggestions, 'margin-left');\n        top -= getComputedStyleLengthProp(suggestions, 'margin-top'); // take into account highlighter/textinput scrolling:\n\n        left -= highlighter.scrollLeft;\n        top -= highlighter.scrollTop; // guard for mentions suggestions list clipped by right edge of window\n\n        var viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n\n        if (left + suggestions.offsetWidth > viewportWidth) {\n          position.left = Math.max(0, viewportWidth - suggestions.offsetWidth);\n        } else {\n          position.left = left;\n        } // guard for mentions suggestions list clipped by bottom edge of window if allowSuggestionsAboveCursor set to true.\n        // Move the list up above the caret if it's getting cut off by the bottom of the window, provided that the list height\n        // is small enough to NOT cover up the caret\n\n\n        if (allowSuggestionsAboveCursor && top + suggestions.offsetHeight > viewportHeight && suggestions.offsetHeight < top - caretHeight || forceSuggestionsAboveCursor) {\n          position.top = Math.max(0, top - suggestions.offsetHeight - caretHeight);\n        } else {\n          position.top = top;\n        }\n      } else {\n        var _left = caretPosition.left - highlighter.scrollLeft;\n\n        var _top = caretPosition.top - highlighter.scrollTop; // guard for mentions suggestions list clipped by right edge of window\n\n\n        if (_left + suggestions.offsetWidth > _this.containerElement.offsetWidth) {\n          position.right = 0;\n        } else {\n          position.left = _left;\n        } // guard for mentions suggestions list clipped by bottom edge of window if allowSuggestionsAboveCursor set to true.\n        // move the list up above the caret if it's getting cut off by the bottom of the window, provided that the list height\n        // is small enough to NOT cover up the caret\n\n\n        if (allowSuggestionsAboveCursor && viewportRelative.top - highlighter.scrollTop + suggestions.offsetHeight > viewportHeight && suggestions.offsetHeight < caretOffsetParentRect.top - caretHeight - highlighter.scrollTop || forceSuggestionsAboveCursor) {\n          position.top = _top - suggestions.offsetHeight - caretHeight;\n        } else {\n          position.top = _top;\n        }\n      }\n\n      if (position.left === _this.state.suggestionsPosition.left && position.top === _this.state.suggestionsPosition.top && position.position === _this.state.suggestionsPosition.position) {\n        return;\n      }\n\n      _this.setState({\n        suggestionsPosition: position\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateHighlighterScroll\", function () {\n      var input = _this.inputElement;\n      var highlighter = _this.highlighterElement;\n\n      if (!input || !highlighter) {\n        // since the invocation of this function is deferred,\n        // the whole component may have been unmounted in the meanwhile\n        return;\n      }\n\n      highlighter.scrollLeft = input.scrollLeft;\n      highlighter.scrollTop = input.scrollTop;\n      highlighter.height = input.height;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCompositionStart\", function () {\n      isComposing = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCompositionEnd\", function () {\n      isComposing = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setSelection\", function (selectionStart, selectionEnd) {\n      if (selectionStart === null || selectionEnd === null) return;\n      var el = _this.inputElement;\n\n      if (el.setSelectionRange) {\n        el.setSelectionRange(selectionStart, selectionEnd);\n      } else if (el.createTextRange) {\n        var range = el.createTextRange();\n        range.collapse(true);\n        range.moveEnd('character', selectionEnd);\n        range.moveStart('character', selectionStart);\n        range.select();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateMentionsQueries\", function (plainTextValue, caretPosition) {\n      // Invalidate previous queries. Async results for previous queries will be neglected.\n      _this._queryId++;\n      _this.suggestions = {};\n\n      _this.setState({\n        suggestions: {}\n      });\n\n      var value = _this.props.value || '';\n      var children = _this.props.children;\n      var config = readConfigFromChildren(children);\n      var positionInValue = mapPlainTextIndex(value, config, caretPosition, 'NULL'); // If caret is inside of mention, do not query\n\n      if (positionInValue === null) {\n        return;\n      } // Extract substring in between the end of the previous mention and the caret\n\n\n      var substringStartIndex = getEndOfLastMention(value.substring(0, positionInValue), config);\n      var substring = plainTextValue.substring(substringStartIndex, caretPosition); // Check if suggestions have to be shown:\n      // Match the trigger patterns of all Mention children on the extracted substring\n\n      React.Children.forEach(children, function (child, childIndex) {\n        if (!child) {\n          return;\n        }\n\n        var regex = makeTriggerRegex(child.props.trigger, _this.props);\n        var match = substring.match(regex);\n\n        if (match) {\n          var querySequenceStart = substringStartIndex + substring.indexOf(match[1], match.index);\n\n          _this.queryData(match[2], childIndex, querySequenceStart, querySequenceStart + match[1].length, plainTextValue);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearSuggestions\", function () {\n      // Invalidate previous queries. Async results for previous queries will be neglected.\n      _this._queryId++;\n      _this.suggestions = {};\n\n      _this.setState({\n        suggestions: {},\n        focusIndex: 0\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"queryData\", function (query, childIndex, querySequenceStart, querySequenceEnd, plainTextValue) {\n      var _this$props6 = _this.props,\n          children = _this$props6.children,\n          ignoreAccents = _this$props6.ignoreAccents;\n      var mentionChild = Children.toArray(children)[childIndex];\n      var provideData = getDataProvider(mentionChild.props.data, ignoreAccents);\n      var syncResult = provideData(query, _this.updateSuggestions.bind(null, _this._queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue));\n\n      if (syncResult instanceof Array) {\n        _this.updateSuggestions(_this._queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue, syncResult);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateSuggestions\", function (queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue, results) {\n      // neglect async results from previous queries\n      if (queryId !== _this._queryId) return; // save in property so that multiple sync state updates from different mentions sources\n      // won't overwrite each other\n\n      _this.suggestions = _objectSpread(_objectSpread({}, _this.suggestions), {}, _defineProperty({}, childIndex, {\n        queryInfo: {\n          childIndex: childIndex,\n          query: query,\n          querySequenceStart: querySequenceStart,\n          querySequenceEnd: querySequenceEnd,\n          plainTextValue: plainTextValue\n        },\n        results: results\n      }));\n      var focusIndex = _this.state.focusIndex;\n      var suggestionsCount = countSuggestions(_this.suggestions);\n\n      _this.setState({\n        suggestions: _this.suggestions,\n        focusIndex: focusIndex >= suggestionsCount ? Math.max(suggestionsCount - 1, 0) : focusIndex\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addMention\", function (_ref2, _ref3) {\n      var id = _ref2.id,\n          display = _ref2.display;\n      var childIndex = _ref3.childIndex,\n          querySequenceStart = _ref3.querySequenceStart,\n          querySequenceEnd = _ref3.querySequenceEnd,\n          plainTextValue = _ref3.plainTextValue;\n      // Insert mention in the marked up value at the correct position\n      var value = _this.props.value || '';\n      var config = readConfigFromChildren(_this.props.children);\n      var mentionsChild = Children.toArray(_this.props.children)[childIndex];\n      var _mentionsChild$props = mentionsChild.props,\n          markup = _mentionsChild$props.markup,\n          displayTransform = _mentionsChild$props.displayTransform,\n          appendSpaceOnAdd = _mentionsChild$props.appendSpaceOnAdd,\n          onAdd = _mentionsChild$props.onAdd;\n      var start = mapPlainTextIndex(value, config, querySequenceStart, 'START');\n      var end = start + querySequenceEnd - querySequenceStart;\n      var insert = makeMentionsMarkup(markup, id, display);\n\n      if (appendSpaceOnAdd) {\n        insert += ' ';\n      }\n\n      var newValue = spliceString(value, start, end, insert); // Refocus input and set caret position to end of mention\n\n      _this.inputElement.focus();\n\n      var displayValue = displayTransform(id, display);\n\n      if (appendSpaceOnAdd) {\n        displayValue += ' ';\n      }\n\n      var newCaretPosition = querySequenceStart + displayValue.length;\n\n      _this.setState({\n        selectionStart: newCaretPosition,\n        selectionEnd: newCaretPosition,\n        setSelectionAfterMentionChange: true\n      }); // Propagate change\n\n\n      var eventMock = {\n        target: {\n          value: newValue\n        }\n      };\n      var mentions = getMentions(newValue, config);\n      var newPlainTextValue = spliceString(plainTextValue, querySequenceStart, querySequenceEnd, displayValue);\n\n      _this.executeOnChange(eventMock, newValue, newPlainTextValue, mentions);\n\n      if (onAdd) {\n        onAdd(id, display, start, end);\n      } // Make sure the suggestions overlay is closed\n\n\n      _this.clearSuggestions();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isLoading\", function () {\n      var isLoading = false;\n      React.Children.forEach(_this.props.children, function (child) {\n        isLoading = isLoading || child && child.props.isLoading;\n      });\n      return isLoading;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isOpened\", function () {\n      return isNumber(_this.state.selectionStart) && (countSuggestions(_this.state.suggestions) !== 0 || _this.isLoading());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_queryId\", 0);\n\n    _this.suggestions = {};\n    _this.uuidSuggestionsOverlay = Math.random().toString(16).substring(2);\n    _this.handleCopy = _this.handleCopy.bind(_assertThisInitialized(_this));\n    _this.handleCut = _this.handleCut.bind(_assertThisInitialized(_this));\n    _this.handlePaste = _this.handlePaste.bind(_assertThisInitialized(_this));\n    _this.state = {\n      focusIndex: 0,\n      selectionStart: null,\n      selectionEnd: null,\n      suggestions: {},\n      caretPosition: null,\n      suggestionsPosition: {}\n    };\n    return _this;\n  }\n\n  _createClass(MentionsInput, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('copy', this.handleCopy);\n      document.addEventListener('cut', this.handleCut);\n      document.addEventListener('paste', this.handlePaste);\n      this.updateSuggestionsPosition();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      // Update position of suggestions unless this componentDidUpdate was\n      // triggered by an update to suggestionsPosition.\n      if (prevState.suggestionsPosition === this.state.suggestionsPosition) {\n        this.updateSuggestionsPosition();\n      } // maintain selection in case a mention is added/removed causing\n      // the cursor to jump to the end\n\n\n      if (this.state.setSelectionAfterMentionChange) {\n        this.setState({\n          setSelectionAfterMentionChange: false\n        });\n        this.setSelection(this.state.selectionStart, this.state.selectionEnd);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('copy', this.handleCopy);\n      document.removeEventListener('cut', this.handleCut);\n      document.removeEventListener('paste', this.handlePaste);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", _extends({\n        ref: this.setContainerElement\n      }, this.props.style), this.renderControl(), this.renderSuggestionsOverlay());\n    }\n  }, {\n    key: \"handlePaste\",\n    value: function handlePaste(event) {\n      if (event.target !== this.inputElement) {\n        return;\n      }\n\n      if (!this.supportsClipboardActions(event)) {\n        return;\n      }\n\n      event.preventDefault();\n      var _this$state3 = this.state,\n          selectionStart = _this$state3.selectionStart,\n          selectionEnd = _this$state3.selectionEnd;\n      var _this$props7 = this.props,\n          value = _this$props7.value,\n          children = _this$props7.children;\n      var config = readConfigFromChildren(children);\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\n      var pastedMentions = event.clipboardData.getData('text/react-mentions');\n      var pastedData = event.clipboardData.getData('text/plain');\n      var newValue = spliceString(value, markupStartIndex, markupEndIndex, pastedMentions || pastedData).replace(/\\r/g, '');\n      var newPlainTextValue = getPlainText(newValue, config);\n      var eventMock = {\n        target: _objectSpread(_objectSpread({}, event.target), {}, {\n          value: newValue\n        })\n      };\n      this.executeOnChange(eventMock, newValue, newPlainTextValue, getMentions(newValue, config)); // Move the cursor position to the end of the pasted data\n\n      var startOfMention = findStartOfMentionInPlainText(value, config, selectionStart);\n      var nextPos = (startOfMention || selectionStart) + getPlainText(pastedMentions || pastedData, config).length;\n      this.setSelection(nextPos, nextPos);\n    }\n  }, {\n    key: \"saveSelectionToClipboard\",\n    value: function saveSelectionToClipboard(event) {\n      // use the actual selectionStart & selectionEnd instead of the one stored\n      // in state to ensure copy & paste also works on disabled inputs & textareas\n      var selectionStart = this.inputElement.selectionStart;\n      var selectionEnd = this.inputElement.selectionEnd;\n      var _this$props8 = this.props,\n          children = _this$props8.children,\n          value = _this$props8.value;\n      var config = readConfigFromChildren(children);\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\n      event.clipboardData.setData('text/plain', event.target.value.slice(selectionStart, selectionEnd));\n      event.clipboardData.setData('text/react-mentions', value.slice(markupStartIndex, markupEndIndex));\n    }\n  }, {\n    key: \"supportsClipboardActions\",\n    value: function supportsClipboardActions(event) {\n      return !!event.clipboardData;\n    }\n  }, {\n    key: \"handleCopy\",\n    value: function handleCopy(event) {\n      if (event.target !== this.inputElement) {\n        return;\n      }\n\n      if (!this.supportsClipboardActions(event)) {\n        return;\n      }\n\n      event.preventDefault();\n      this.saveSelectionToClipboard(event);\n    }\n  }, {\n    key: \"handleCut\",\n    value: function handleCut(event) {\n      if (event.target !== this.inputElement) {\n        return;\n      }\n\n      if (!this.supportsClipboardActions(event)) {\n        return;\n      }\n\n      event.preventDefault();\n      this.saveSelectionToClipboard(event);\n      var _this$state4 = this.state,\n          selectionStart = _this$state4.selectionStart,\n          selectionEnd = _this$state4.selectionEnd;\n      var _this$props9 = this.props,\n          children = _this$props9.children,\n          value = _this$props9.value;\n      var config = readConfigFromChildren(children);\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\n      var newValue = [value.slice(0, markupStartIndex), value.slice(markupEndIndex)].join('');\n      var newPlainTextValue = getPlainText(newValue, config);\n      var eventMock = {\n        target: _objectSpread(_objectSpread({}, event.target), {}, {\n          value: newPlainTextValue\n        })\n      };\n      this.executeOnChange(eventMock, newValue, newPlainTextValue, getMentions(value, config));\n    } // Handle input element's change event\n\n  }]);\n\n  return MentionsInput;\n}(React.Component);\n/**\n * Returns the computed length property value for the provided element.\n * Note: According to spec and testing, can count on length values coming back in pixels. See https://developer.mozilla.org/en-US/docs/Web/CSS/used_value#Difference_from_computed_value\n */\n\n\n_defineProperty(MentionsInput, \"propTypes\", propTypes);\n\n_defineProperty(MentionsInput, \"defaultProps\", {\n  ignoreAccents: false,\n  singleLine: false,\n  allowSuggestionsAboveCursor: false,\n  onKeyDown: function onKeyDown() {\n    return null;\n  },\n  onSelect: function onSelect() {\n    return null;\n  },\n  onBlur: function onBlur() {\n    return null;\n  }\n});\n\nvar getComputedStyleLengthProp = function getComputedStyleLengthProp(forElement, propertyName) {\n  var length = parseFloat(window.getComputedStyle(forElement, null).getPropertyValue(propertyName));\n  return isFinite(length) ? length : 0;\n};\n\nvar isMobileSafari = typeof navigator !== 'undefined' && /iPhone|iPad|iPod/i.test(navigator.userAgent);\nvar styled$3 = createDefaultStyle({\n  position: 'relative',\n  overflowY: 'visible',\n  input: {\n    display: 'block',\n    width: '100%',\n    position: 'absolute',\n    margin: 0,\n    top: 0,\n    left: 0,\n    boxSizing: 'border-box',\n    backgroundColor: 'transparent',\n    fontFamily: 'inherit',\n    fontSize: 'inherit',\n    letterSpacing: 'inherit'\n  },\n  '&multiLine': {\n    input: _objectSpread({\n      height: '100%',\n      bottom: 0,\n      overflow: 'hidden',\n      resize: 'none'\n    }, isMobileSafari ? {\n      marginTop: 1,\n      marginLeft: -3\n    } : null)\n  }\n}, function (_ref4) {\n  var singleLine = _ref4.singleLine;\n  return {\n    '&singleLine': singleLine,\n    '&multiLine': !singleLine\n  };\n});\nvar MentionsInput$1 = styled$3(MentionsInput);\n\nvar defaultStyle = {\n  fontWeight: 'inherit'\n};\n\nvar Mention = function Mention(_ref) {\n  var display = _ref.display,\n      style = _ref.style,\n      className = _ref.className,\n      classNames = _ref.classNames;\n  var styles = useStyles(defaultStyle, {\n    style: style,\n    className: className,\n    classNames: classNames\n  });\n  return /*#__PURE__*/React.createElement(\"strong\", styles, display);\n};\n\nMention.propTypes = {\n  /**\n   * Called when a new mention is added in the input\n   *\n   * Example:\n   *\n   * ```js\n   * function(id, display) {\n   *   console.log(\"user \" + display + \" was mentioned!\");\n   * }\n   * ```\n   */\n  onAdd: PropTypes.func,\n  onRemove: PropTypes.func,\n  renderSuggestion: PropTypes.func,\n  trigger: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(RegExp)]),\n  markup: PropTypes.string,\n  displayTransform: PropTypes.func,\n\n  /**\n   * If set to `true` spaces will not interrupt matching suggestions\n   */\n  allowSpaceInQuery: PropTypes.bool,\n  isLoading: PropTypes.bool\n};\nMention.defaultProps = {\n  trigger: '@',\n  markup: '@[__display__](__id__)',\n  displayTransform: function displayTransform(id, display) {\n    return display || id;\n  },\n  onAdd: function onAdd() {\n    return null;\n  },\n  onRemove: function onRemove() {\n    return null;\n  },\n  renderSuggestion: null,\n  isLoading: false,\n  appendSpaceOnAdd: false\n};\n\nexport { Mention, MentionsInput$1 as MentionsInput };\n"],"mappings":"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CDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAAE,GAAG;EACTC,OAAO,EAAE;AACX,CAAC,EAAE;EACDD,IAAI,EAA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"},"metadata":{},"sourceType":"module","externalDependencies":[]}