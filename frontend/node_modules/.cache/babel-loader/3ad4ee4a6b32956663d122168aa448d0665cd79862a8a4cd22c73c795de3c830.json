{"ast":null,"code":"var _jsxFileName = \"/Users/zanemaomac/Desktop/CIS5570/project/project---design-hw1-team_offersoverflow/bestapp666/frontend/src/pages/FeedPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { CardFeedPage } from '../components/CardFeedPage';\nimport Stack from 'react-bootstrap/Stack';\nimport { NavLink } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport { selectCurrentUser } from './UserPage/currentUserSlice';\nimport { getUsersAsList, getLastestPostOfAUser, getPost, getUser } from \"../fetcher\";\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function FeedPage() {\n  _s();\n  const dispatch = useDispatch();\n  // get followings of the current user\n  const stateCurrentUser = useSelector(selectCurrentUser);\n  let followingsUsernames = stateCurrentUser.followings;\n  const [feedPostOfUser, setFeedPostOfUser] = useState([]);\n  const [popularPostsNearby, setPopularPostsNearby] = useState([{\n    \"id\": 29,\n    \"author\": \"elon\",\n    \"description\": \"I have officially dubbed myself \\\"Chief Twit\\\"\",\n    \"date\": \"10/1/2022\",\n    \"image\": \"https://mediaproxy.salon.com/width/1200/https://media.salon.com/2022/04/elon-musk-twitter-0405221.jpg\",\n    \"likes\": [\"ayesha\", \"elon\"],\n    \"comments\": [{\n      \"author\": \"ayesha\",\n      \"comment\": \"ayesha leaving comment. Good luck with your buy.\",\n      \"mention\": \"@curry\"\n    }]\n  }]);\n  const [editedAndRefreshCards, setEditedAndRefreshCards] = useState(true); //the value of this switch doesn't matter only the change matter for triggering useEffect\n  const [hearFromDeleteComment, setHearFromDeleteComment] = useState(false); //the request for refreshing comment list from PopUp window, trigger value doesnt matter\n  const [visibility, setVisibility] = useState(false);\n  const [postBeingEdited, setPostBeingEdited] = useState({});\n  useEffect(() => {\n    async function fetchData() {\n      const userObjects = await getUsersAsList(followingsUsernames);\n\n      //remove user who has no post\n      const userObjectsFiltered = userObjects.filter(object => {\n        return object.posts.length !== 0;\n      });\n\n      // map the object to it's latest post\n      const followingsLatestPost = await Promise.all(userObjectsFiltered.map(async o => {\n        //return the largest(most recent) ID\n        let postObject = await getLastestPostOfAUser(o.username);\n        return postObject;\n      }));\n      setFeedPostOfUser(followingsLatestPost);\n      // fetch popular post\n      // get the popular post \n    }\n\n    try {\n      fetchData();\n    } catch (err) {\n      console.error(err);\n    }\n  }, [editedAndRefreshCards, hearFromDeleteComment]); //adding empty dependency making sure useEffect only run once after each render\n\n  const cards = (feedPostOfUser.length === 0 ? popularPostsNearby : feedPostOfUser).map(p => /*#__PURE__*/_jsxDEV(CardFeedPage, {\n    post: p,\n    username: stateCurrentUser.username,\n    oldEditedAndRefreshCards: editedAndRefreshCards,\n    allDisplayedPosts: feedPostOfUser,\n    setEditedAndRefreshCards: setEditedAndRefreshCards,\n    setCommentState: setFeedPostOfUser,\n    setPostBeingEdited: setPostBeingEdited,\n    setVisibility: setVisibility\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this));\n  let userlist = stateCurrentUser.followerSuggestions.map(p => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n    as: \"li\",\n    children: /*#__PURE__*/_jsxDEV(NavLink, {\n      to: \"/user/\" + p,\n      className: \"button_text\",\n      children: p\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"background\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        style: {\n          paddingLeft: \"10%\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Stack, {\n          gap: 2,\n          className: \"col-md-6 mx-auto\",\n          children: cards\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        style: {\n          paddingLeft: \"20%\",\n          paddingRight: \"10%\",\n          paddingBottom: \"2rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            paddingBottom: \"2rem\"\n          },\n          children: \" Recommended Users to Follow \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n          as: \"ul\",\n          defaultActiveKey: \"#link1\",\n          children: userlist\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(FeedPage, \"IxFaGJ+tOJTGiLuKQ+8UVQT+Rvw=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = FeedPage;\nvar _c;\n$RefreshReg$(_c, \"FeedPage\");","map":{"version":3,"names":["React","useState","useEffect","CardFeedPage","Stack","NavLink","useSelector","useDispatch","ListGroup","selectCurrentUser","getUsersAsList","getLastestPostOfAUser","getPost","getUser","Row","Col","FeedPage","dispatch","stateCurrentUser","followingsUsernames","followings","feedPostOfUser","setFeedPostOfUser","popularPostsNearby","setPopularPostsNearby","editedAndRefreshCards","setEditedAndRefreshCards","hearFromDeleteComment","setHearFromDeleteComment","visibility","setVisibility","postBeingEdited","setPostBeingEdited","fetchData","userObjects","userObjectsFiltered","filter","object","posts","length","followingsLatestPost","Promise","all","map","o","postObject","username","err","console","error","cards","p","userlist","followerSuggestions","paddingLeft","paddingRight","paddingBottom"],"sources":["/Users/zanemaomac/Desktop/CIS5570/project/project---design-hw1-team_offersoverflow/bestapp666/frontend/src/pages/FeedPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {CardFeedPage} from '../components/CardFeedPage';\nimport Stack from 'react-bootstrap/Stack';\nimport { NavLink } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux'\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport {selectCurrentUser} from './UserPage/currentUserSlice'\nimport {getUsersAsList, getLastestPostOfAUser, getPost, getUser } from \"../fetcher\";\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\n\nexport default function FeedPage() {\n  const dispatch = useDispatch();\n// get followings of the current user\n  const stateCurrentUser = useSelector(selectCurrentUser);\n  let followingsUsernames = stateCurrentUser.followings;\n  const [feedPostOfUser, setFeedPostOfUser] = useState([]);\n  const [popularPostsNearby, setPopularPostsNearby] = useState([\n    {\n      \"id\": 29,\n      \"author\": \"elon\",\n      \"description\": \"I have officially dubbed myself \\\"Chief Twit\\\"\",\n      \"date\": \"10/1/2022\",\n      \"image\": \"https://mediaproxy.salon.com/width/1200/https://media.salon.com/2022/04/elon-musk-twitter-0405221.jpg\",\n      \"likes\": [\n        \"ayesha\",\n        \"elon\"\n      ],\n      \"comments\": [\n        {\n          \"author\": \"ayesha\",\n          \"comment\": \"ayesha leaving comment. Good luck with your buy.\",\n          \"mention\": \"@curry\"\n        }\n      ]\n    }\n  ]);\n  const [editedAndRefreshCards, setEditedAndRefreshCards] = useState(true); //the value of this switch doesn't matter only the change matter for triggering useEffect\n  const [hearFromDeleteComment, setHearFromDeleteComment] = useState(false); //the request for refreshing comment list from PopUp window, trigger value doesnt matter\n  const [visibility, setVisibility] = useState(false);\n  const [postBeingEdited, setPostBeingEdited] = useState({});\n  \n    useEffect(() => {\n      async function fetchData() {\n        const userObjects = await getUsersAsList(followingsUsernames);\n        \n        //remove user who has no post\n        const userObjectsFiltered = userObjects.filter((object)=>{\n            return object.posts.length !==0;\n          });\n\n        // map the object to it's latest post\n        const followingsLatestPost = await Promise.all(userObjectsFiltered.map(async (o) => {\n          //return the largest(most recent) ID\n          let postObject = await getLastestPostOfAUser(o.username);\n          return postObject;\n        }))\n        setFeedPostOfUser(followingsLatestPost);\n        // fetch popular post\n        // get the popular post \n      }\n      try{\n        fetchData();\n      }\n      catch(err){\n          console.error(err);\n      }\n    }, [editedAndRefreshCards, hearFromDeleteComment]); //adding empty dependency making sure useEffect only run once after each render\n  \n\n\n  const cards = ((feedPostOfUser.length===0) ? popularPostsNearby:feedPostOfUser).map((p) => (\n    <CardFeedPage post={p} username={stateCurrentUser.username} oldEditedAndRefreshCards={editedAndRefreshCards} allDisplayedPosts={feedPostOfUser}\n    setEditedAndRefreshCards = {setEditedAndRefreshCards} setCommentState={setFeedPostOfUser} \n    setPostBeingEdited = {setPostBeingEdited} setVisibility= {setVisibility}/>\n  ))\n\n  let userlist =  stateCurrentUser.followerSuggestions.map((p) => (\n    <ListGroup.Item as=\"li\" >\n      <NavLink to={\"/user/\"+p} className=\"button_text\">\n        {p}\n      </NavLink>\n    </ListGroup.Item>\n  ))\n\n  return (\n    <div className='background'>\n    \n    <Row>\n\n      <Col style={{paddingLeft: \"10%\"}}>\n        <Stack gap={2} className=\"col-md-6 mx-auto\">\n          {cards}\n        </Stack>\n      </Col>\n\n      <Col style={{paddingLeft: \"20%\", paddingRight: \"10%\", paddingBottom: \"2rem\"}}>\n        <h3 style={{paddingBottom: \"2rem\"}}> Recommended Users to Follow </h3>\n        <ListGroup as=\"ul\" defaultActiveKey=\"#link1\">\n          {userlist}\n        </ListGroup>\n      </Col>\n\n    </Row>\n    \n    </div>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}